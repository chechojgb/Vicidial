[general]
static=yes
writeprotect=no

[globals]
CONSOLE=Console/dsp                             ; Console interface for demo
TRUNK=DAHDI/r1                                    ; Trunk interface
TRUNKX=DAHDI/r2                                 ; 2nd trunk interface
TRUNKIAX=IAX2/ASTtest1:test@10.10.10.16:4569    ; IAX trunk interface
TRUNKIAX1=IAX2/ASTtest1:test@10.10.10.16:4569   ; IAX trunk interface
TRUNKBINFONE=IAX2/1112223333:PASSWORD@iax.binfone.com   ; IAX trunk interface
SIPtrunk=SIP/1234:PASSWORD@sip.provider.net     ; SIP trunk

#include extensions-vicidial.conf
[soul]

exten => _11453XXXXXXXXX,1,NOOP(SALIDA DE LLAMADA ${EXTEN})
exten => _11453XXXXXXXXX,n,AGI(mysoulphone/registra_cliente.agi,1,${EXTEN:4},${SPEXTEN},${UNIQUEID})
exten => _11453XXXXXXXXX,n,Set(CHANNEL(hangup_handler_push)=out_end_call,66004,1)
exten => _11453XXXXXXXXX,n,Set(SPcall_id=${SIP_HEADER(Call-ID)})
exten => _11453XXXXXXXXX,n,AGI(mysoulphone/SP_Create_call_Out.agi,${SPcall_id},${CALLERID(num)},36)
exten => _11453XXXXXXXXX,n,MixMonitor(/tmp/soul/Recordings/Records/OUT_${CC_id}.wav,a)
;exten => _11453XXXXXXXXX,n,
;exten => _11453XXXXXXXXX,n,
exten => _11453XXXXXXXXX,n,Dial(SIP/PXY30/2424${EXTEN:4},60,tTor)
exten => _11453XXXXXXXXX,n,Hangup()

exten => _12453XXXXXXXXX,1,NOOP(SALIDA DE LLAMADA ${EXTEN})
;exten => _11453XXXXXXXXX,n,AGI(mysoulphone/registra_cliente.agi,1,${EXTEN:4},${SPEXTEN},${UNIQUEID})
exten => _12453XXXXXXXXX,n,Wait(0.1)
exten => _12453XXXXXXXXX,n,Set(CHANNEL(hangup_handler_push)=out_end_call,66004,1)
exten => _12453XXXXXXXXX,n,Set(RANDOM1=${RAND(100000,999999)})
exten => _12453XXXXXXXXX,n,Set(RANDOM2=${RAND(100000,999999)})
;exten => _12453XXXXXXXXX,n,NoOp(Call-ID: ${SIPCALLID})
;exten => _12453XXXXXXXXX,n,NoOp(Caller ID: ${CALLERID(num)})
;exten => _12453XXXXXXXXX,n,NoOp(User-Agent: ${SIPUSERAGENT})
;exten => _12453XXXXXXXXX,n,NoOp(Remote IP: ${CHANNEL(recvip)})
exten => _12453XXXXXXXXX,n,Set(SPcall_id=${SIP_HEADER(Call-ID)}${RANDOM1}${RANDOM2})
exten => _12453XXXXXXXXX,n,AGI(mysoulphone/SP_Create_call_Out.agi,${SPcall_id},${EXTEN:4},36)
exten => _12453XXXXXXXXX,n,MixMonitor(/tmp/soul/Recordings/Records/OUT_${CC_id}.wav,a)
;exten => _11453XXXXXXXXX,n,
;exten => _11453XXXXXXXXX,n,
exten => _12453XXXXXXXXX,n,Dial(SIP/PXY30/2424${EXTEN:4},60,tTor)
exten => _12453XXXXXXXXX,n,Hangup()

exten => _12456XXXXXXXXX,1,NOOP(SALIDA DE LLAMADA ${EXTEN})
;exten => _11453XXXXXXXXX,n,AGI(mysoulphone/registra_cliente.agi,1,${EXTEN:4},${SPEXTEN},${UNIQUEID})
exten => _12456XXXXXXXXX,n,Wait(0.1)
exten => _12456XXXXXXXXX,n,Set(CHANNEL(hangup_handler_push)=out_end_call,66004,1)
exten => _12456XXXXXXXXX,n,Set(RANDOM1=${RAND(100000,999999)})
exten => _12456XXXXXXXXX,n,Set(RANDOM2=${RAND(100000,999999)})
;exten => _12453XXXXXXXXX,n,NoOp(Call-ID: ${SIPCALLID})
;exten => _12453XXXXXXXXX,n,NoOp(Caller ID: ${CALLERID(num)})
;exten => _12453XXXXXXXXX,n,NoOp(User-Agent: ${SIPUSERAGENT})
;exten => _12453XXXXXXXXX,n,NoOp(Remote IP: ${CHANNEL(recvip)})
exten => _12456XXXXXXXXX,n,Set(SPcall_id=${SIP_HEADER(Call-ID)}${RANDOM1}${RANDOM2})
exten => _12456XXXXXXXXX,n,AGI(mysoulphone/SP_Create_call_Out.agi,${SPcall_id},${EXTEN:4},36)
exten => _12456XXXXXXXXX,n,MixMonitor(/tmp/soul/Recordings/Records/OUT_${CC_id}.wav,a)
;exten => _11453XXXXXXXXX,n,
;exten => _11453XXXXXXXXX,n,
exten => _12456XXXXXXXXX,n,Dial(SIP/PXY30/2424${EXTEN:4},60,tTor)
exten => _12456XXXXXXXXX,n,Hangup()




[Pruebas]

exten => _11453XXXXXXXXX,1,NOOP(SALIDA DE LLAMADA ${EXTEN} Pruebas)
;exten => _11453XXXXXXXXX,n,AGI(mysoulphone/registra_cliente.agi,1,${EXTEN:4},${SPEXTEN},${UNIQUEID})
exten => _11453XXXXXXXXX,n,Set(__U2U=234123123123-FONCA)
exten => _11453XXXXXXXXX,n,Set(CHANNEL(hangup_handler_push)=out_end_call,66004,1)
exten => _11453XXXXXXXXX,n,Set(SPcall_id=${SIP_HEADER(Call-ID)})
exten => _11453XXXXXXXXX,n,AGI(mysoulphone/SP_Create_call_Out.agi,${SPcall_id},${CALLERID(num)},36)
exten => _11453XXXXXXXXX,n,MixMonitor(/tmp/soul/Recordings/Records/OUT_${CC_id}.wav,a)
;exten => _11453XXXXXXXXX,n,
;exten => _11453XXXXXXXXX,n,
exten => _11453XXXXXXXXX,n,Dial(SIP/VC100/2424${EXTEN:4},60,tTor)
exten => _11453XXXXXXXXX,n,Hangup()


[out_end_call]
exten => 66004,1,Noop(Fin llamada tiempo espera: ${QUEUETIME} otro tiempo ${QUEUEHOLDTIME} )
;exten => 66004,n,AGI(mysoulphone/SP_consulta_usr.agi,${CC_id})
;exten => 66004,n,Agi(mysoulphone/registra_cliente.agi,2,${CC_id},${agent},${UNIQUEID})
exten => 66004,n,AGI(mysoulphone/SP_CallEnd.agi,${CC_id})
exten => 66004,n,MixMonitor(${CC_id}.wav)
;exten => 66004,n,AGI(mysoulphone/SendSurveys.agi,${CC_id},${enc_1},${enc_2},${enc_3},${enc_4},${enc_5})
;exten => 63004,n,Agi(mysoulphone/control_ext.agi,2,${UNIQUEID})
;exten => 63004,n,Set(custom_CC=${CUT(U2U,|,2)})
;exten => 66004,n,AGI(mysoulphone/Rename.agi,/tmp/soul/Recordings/Original/${CC_id}.wav)
exten => 66004,n,Hangup()


[from-vicidial]
include => trunkinbound
include => Interna-transfer

[trunkinbound]
include => Encuestas
include => Inbound
include => Interna-transfer
;include => from-vicidial

; DID call routing process
; exten => _XXXXXXXXXX,1,AGI(agi-DID_route.agi)  ; use this one instead of the one below if you are having delay issues, and match to number of received digits
;exten => _6017441427,1,Noop(Llamada directa Voicebot V2 )
;exten => _6017441427,n,goto(default,75093,1)
;exten => _6017441427,n,hangup()

;OUTBOUND
;exten => _12453XXXXXXXXX,1,NOOP(SALIDA DE LLAMADA ${EXTEN})
;exten => _12453XXXXXXXXX,n,
;exten => _12453XXXXXXXXX,n,
;exten => _12453XXXXXXXXX,n,
;exten => _12453XXXXXXXXX,n,
;exten => _12453XXXXXXXXX,n,Dial(SIP/PXY99/${EXTEN:4},60,tTor)
;exten => _12453XXXXXXXXX,n,Hangup()
exten => _22XXX,1,Noop(transferencia Interna)
exten => _22XXX,n,Dial(SIP/${EXTEN:1},30)
exten => _22XXX,n,Hangup()


exten => _12453XXXXXXXXX,1,NOOP(SALIDA DE LLAMADA ${EXTEN} trunkinbound)
;exten => _11453XXXXXXXXX,n,AGI(mysoulphone/registra_cliente.agi,1,${EXTEN:4},${SPEXTEN},${UNIQUEID})
exten => _12453XXXXXXXXX,n,Wait(0.1)
exten => _12453XXXXXXXXX,n,Set(CHANNEL(hangup_handler_push)=out_end_call,66004,1)
exten => _12453XXXXXXXXX,n,Set(RANDOM1=${RAND(100000,999999)})
exten => _12453XXXXXXXXX,n,Set(RANDOM2=${RAND(100000,999999)})
;exten => _12453XXXXXXXXX,n,NoOp(Call-ID: ${SIPCALLID})
;exten => _12453XXXXXXXXX,n,NoOp(Caller ID: ${CALLERID(num)})
;exten => _12453XXXXXXXXX,n,NoOp(User-Agent: ${SIPUSERAGENT})
;exten => _12453XXXXXXXXX,n,NoOp(Remote IP: ${CHANNEL(recvip)})
exten => _12453XXXXXXXXX,n,Set(SPcall_id=${SIP_HEADER(Call-ID)}${RANDOM1}${RANDOM2})
exten => _12453XXXXXXXXX,n,AGI(mysoulphone/SP_Create_call_Out.agi,${SPcall_id},${EXTEN:4},36)
exten => _12453XXXXXXXXX,n,MixMonitor(/tmp/soul/Recordings/Original/OUT_${CC_id}.wav)
;exten => _11453XXXXXXXXX,n,
exten => _12453XXXXXXXXX,n,Progress()
exten => _12453XXXXXXXXX,n,Dial(SIP/PXY30/2424${EXTEN:4},60,tTor)
exten => _12453XXXXXXXXX,n,Dial(SIP/PXY30/2425${EXTEN:4},60,tTor)
exten => _12453XXXXXXXXX,n,Hangup()

exten => _12456XXXXXXXXX,1,NOOP(SALIDA DE LLAMADA ${EXTEN} trunkinbound)
;exten => _11453XXXXXXXXX,n,AGI(mysoulphone/registra_cliente.agi,1,${EXTEN:4},${SPEXTEN},${UNIQUEID})
exten => _12456XXXXXXXXX,n,Wait(0.1)
exten => _12456XXXXXXXXX,n,Set(CHANNEL(hangup_handler_push)=out_end_call,66004,1)
exten => _12456XXXXXXXXX,n,Set(RANDOM1=${RAND(100000,999999)})
exten => _12456XXXXXXXXX,n,Set(RANDOM2=${RAND(100000,999999)})
;exten => _12453XXXXXXXXX,n,NoOp(Call-ID: ${SIPCALLID})
;exten => _12453XXXXXXXXX,n,NoOp(Caller ID: ${CALLERID(num)})
;exten => _12453XXXXXXXXX,n,NoOp(User-Agent: ${SIPUSERAGENT})
;exten => _12453XXXXXXXXX,n,NoOp(Remote IP: ${CHANNEL(recvip)})
exten => _12456XXXXXXXXX,n,Set(SPcall_id=${SIP_HEADER(Call-ID)}${RANDOM1}${RANDOM2})
exten => _12456XXXXXXXXX,n,AGI(mysoulphone/SP_Create_call_Out.agi,${SPcall_id},${EXTEN:4},36)
exten => _12456XXXXXXXXX,n,MixMonitor(/tmp/soul/Recordings/Original/OUT_${CC_id}.wav)
;exten => _11453XXXXXXXXX,n,
exten => _11456XXXXXXXXX,n,Progress()
exten => _12456XXXXXXXXX,n,Dial(SIP/PXY30/2424${EXTEN:4},60,tTor)
exten => _12456XXXXXXXXX,n,Hangup()

exten => _11453XXXXXXXXX,1,NOOP(SALIDA DE LLAMADA ${EXTEN} trunkinbound)
;exten => _11453XXXXXXXXX,n,AGI(mysoulphone/registra_cliente.agi,1,${EXTEN:4},${SPEXTEN},${UNIQUEID})
exten => _11453XXXXXXXXX,n,Wait(0.1)
exten => _11453XXXXXXXXX,n,Set(CHANNEL(hangup_handler_push)=out_end_call,66004,1)
exten => _11453XXXXXXXXX,n,Set(RANDOM1=${RAND(100000,999999)})
exten => _11453XXXXXXXXX,n,Set(RANDOM2=${RAND(100000,999999)})
;exten => _12453XXXXXXXXX,n,NoOp(Call-ID: ${SIPCALLID})
;exten => _12453XXXXXXXXX,n,NoOp(Caller ID: ${CALLERID(num)})
;exten => _12453XXXXXXXXX,n,NoOp(User-Agent: ${SIPUSERAGENT})
;exten => _12453XXXXXXXXX,n,NoOp(Remote IP: ${CHANNEL(recvip)})
exten => _11453XXXXXXXXX,n,Set(SPcall_id=${SIP_HEADER(Call-ID)}${RANDOM1}${RANDOM2})
exten => _11453XXXXXXXXX,n,AGI(mysoulphone/SP_Create_call_Out.agi,${SPcall_id},${EXTEN:4})
exten => _11453XXXXXXXXX,n,MixMonitor(/tmp/soul/Recordings/Original/OUT_${CC_id}.wav)
;exten => _11453XXXXXXXXX,n,
exten => _11453XXXXXXXXX,n,Progress()
exten => _11453XXXXXXXXX,n,Dial(SIP/PXY30/2424${EXTEN:4},60,tTor)
exten => _11453XXXXXXXXX,n,Hangup()




;exten => _6014863004,n,Progress()
;
exten => 2000,hint,SIP/2000
exten => 2001,hint,SIP/2001
exten => 2002,hint,SIP/2002
exten => 2003,hint,SIP/2003
exten => 2004,hint,SIP/2004
exten => 2005,hint,SIP/2005
exten => 2006,hint,SIP/2006
exten => 2007,hint,SIP/2007
exten => 2008,hint,SIP/2008
exten => 2009,hint,SIP/2009
exten => 2010,hint,SIP/2010
exten => 2011,hint,SIP/2011
exten => 2012,hint,SIP/2012
exten => 2013,hint,SIP/2013
exten => 2014,hint,SIP/2014
exten => 2015,hint,SIP/2015
exten => 2016,hint,SIP/2016
exten => 2017,hint,SIP/2017
exten => 2018,hint,SIP/2018
exten => 2019,hint,SIP/2019
exten => 2020,hint,SIP/2020
exten => 2021,hint,SIP/2021
exten => 2022,hint,SIP/2022
exten => 2023,hint,SIP/2023
exten => 2024,hint,SIP/2024
exten => 2025,hint,SIP/2025
exten => 2026,hint,SIP/2026
exten => 2027,hint,SIP/2027
exten => 2028,hint,SIP/2028
exten => 2029,hint,SIP/2029
exten => 2030,hint,SIP/2030
exten => 2031,hint,SIP/2031
exten => 2032,hint,SIP/2032
exten => 2033,hint,SIP/2033
exten => 2034,hint,SIP/2034
exten => 2035,hint,SIP/2035
exten => 2036,hint,SIP/2036
exten => 2037,hint,SIP/2037
exten => 2038,hint,SIP/2038
exten => 2039,hint,SIP/2039
exten => 2040,hint,SIP/2040
exten => 2041,hint,SIP/2041
exten => 2042,hint,SIP/2042
exten => 2043,hint,SIP/2043
exten => 2044,hint,SIP/2044
exten => 2045,hint,SIP/2045
exten => 2046,hint,SIP/2046
exten => 2047,hint,SIP/2047
exten => 2048,hint,SIP/2048
exten => 2049,hint,SIP/2049
exten => 2050,hint,SIP/2050
exten => 2051,hint,SIP/2051
exten => 2052,hint,SIP/2052
exten => 2053,hint,SIP/2053
exten => 2054,hint,SIP/2054
exten => 2055,hint,SIP/2055
exten => 2056,hint,SIP/2056
exten => 2057,hint,SIP/2057
exten => 2058,hint,SIP/2058
exten => 2059,hint,SIP/2059
exten => 2060,hint,SIP/2060
exten => 2061,hint,SIP/2061
exten => 2062,hint,SIP/2062
exten => 2063,hint,SIP/2063
exten => 2064,hint,SIP/2064
exten => 2065,hint,SIP/2065
exten => 2066,hint,SIP/2066
exten => 2067,hint,SIP/2067
exten => 2068,hint,SIP/2068
exten => 2069,hint,SIP/2069
exten => 2070,hint,SIP/2070
exten => 2071,hint,SIP/2071
exten => 2072,hint,SIP/2072
exten => 2073,hint,SIP/2073
exten => 2074,hint,SIP/2074
exten => 2075,hint,SIP/2075
exten => 2076,hint,SIP/2076
exten => 2077,hint,SIP/2077
exten => 2078,hint,SIP/2078
exten => 2079,hint,SIP/2079
exten => 2080,hint,SIP/2080
exten => 2081,hint,SIP/2081
exten => 2082,hint,SIP/2082
exten => 2083,hint,SIP/2083
exten => 2084,hint,SIP/2084
exten => 2085,hint,SIP/2085
exten => 2086,hint,SIP/2086
exten => 2087,hint,SIP/2087
exten => 2088,hint,SIP/2088
exten => 2089,hint,SIP/2089
exten => 2090,hint,SIP/2090
exten => 2091,hint,SIP/2091
exten => 2092,hint,SIP/2092
exten => 2093,hint,SIP/2093
exten => 2094,hint,SIP/2094
exten => 2095,hint,SIP/2095
exten => 2096,hint,SIP/2096
exten => 2097,hint,SIP/2097
exten => 2098,hint,SIP/2098
exten => 2099,hint,SIP/2099
exten => 2100,hint,SIP/2100
exten => 2101,hint,SIP/2101
exten => 2102,hint,SIP/2102
exten => 2103,hint,SIP/2103
exten => 2104,hint,SIP/2104
exten => 2105,hint,SIP/2105
exten => 2106,hint,SIP/2106
exten => 2107,hint,SIP/2107
exten => 2108,hint,SIP/2108
exten => 2109,hint,SIP/2109
exten => 2110,hint,SIP/2110
exten => 2111,hint,SIP/2111
exten => 2112,hint,SIP/2112
exten => 2113,hint,SIP/2113
exten => 2114,hint,SIP/2114
exten => 2115,hint,SIP/2115
exten => 2116,hint,SIP/2116
exten => 2117,hint,SIP/2117
exten => 2118,hint,SIP/2118
exten => 2119,hint,SIP/2119
exten => 2120,hint,SIP/2120
exten => 2121,hint,SIP/2121
exten => 2122,hint,SIP/2122
exten => 2123,hint,SIP/2123
exten => 2124,hint,SIP/2124
exten => 2125,hint,SIP/2125
exten => 2126,hint,SIP/2126
exten => 2127,hint,SIP/2127
exten => 2128,hint,SIP/2128
exten => 2129,hint,SIP/2129
exten => 2130,hint,SIP/2130
exten => 2131,hint,SIP/2131
exten => 2132,hint,SIP/2132
exten => 2133,hint,SIP/2133
exten => 2134,hint,SIP/2134
exten => 2135,hint,SIP/2135
exten => 2136,hint,SIP/2136
exten => 2137,hint,SIP/2137
exten => 2138,hint,SIP/2138
exten => 2139,hint,SIP/2139
exten => 2140,hint,SIP/2140
exten => 2141,hint,SIP/2141
exten => 2142,hint,SIP/2142
exten => 2143,hint,SIP/2143
exten => 2144,hint,SIP/2144
exten => 2145,hint,SIP/2145
exten => 2146,hint,SIP/2146
exten => 2147,hint,SIP/2147
exten => 2148,hint,SIP/2148
exten => 2149,hint,SIP/2149
exten => 2150,hint,SIP/2150
exten => 2151,hint,SIP/2151
exten => 2152,hint,SIP/2152
exten => 2153,hint,SIP/2153
exten => 2154,hint,SIP/2154
exten => 2155,hint,SIP/2155
exten => 2156,hint,SIP/2156
exten => 2157,hint,SIP/2157
exten => 2158,hint,SIP/2158
exten => 2159,hint,SIP/2159
exten => 2160,hint,SIP/2160
exten => 2161,hint,SIP/2161
exten => 2162,hint,SIP/2162
exten => 2163,hint,SIP/2163
exten => 2164,hint,SIP/2164
exten => 2165,hint,SIP/2165
exten => 2166,hint,SIP/2166
exten => 2167,hint,SIP/2167
exten => 2168,hint,SIP/2168
exten => 2169,hint,SIP/2169
exten => 2170,hint,SIP/2170
exten => 2171,hint,SIP/2171
exten => 2172,hint,SIP/2172
exten => 2173,hint,SIP/2173
exten => 2174,hint,SIP/2174
exten => 2175,hint,SIP/2175
exten => 2176,hint,SIP/2176
exten => 2177,hint,SIP/2177
exten => 2178,hint,SIP/2178
exten => 2179,hint,SIP/2179
exten => 2180,hint,SIP/2180
exten => 2181,hint,SIP/2181
exten => 2182,hint,SIP/2182
exten => 2183,hint,SIP/2183
exten => 2184,hint,SIP/2184
exten => 2185,hint,SIP/2185
exten => 2186,hint,SIP/2186
exten => 2187,hint,SIP/2187
exten => 2188,hint,SIP/2188
exten => 2189,hint,SIP/2189
exten => 2190,hint,SIP/2190
exten => 2191,hint,SIP/2191
exten => 2192,hint,SIP/2192
exten => 2193,hint,SIP/2193
exten => 2194,hint,SIP/2194
exten => 2195,hint,SIP/2195
exten => 2196,hint,SIP/2196
exten => 2197,hint,SIP/2197
exten => 2198,hint,SIP/2198
exten => 2199,hint,SIP/2199
exten => 2200,hint,SIP/2200
exten => 2201,hint,SIP/2201
exten => 2202,hint,SIP/2202
exten => 2203,hint,SIP/2203
exten => 2204,hint,SIP/2204
exten => 2205,hint,SIP/2205
exten => 2206,hint,SIP/2206
exten => 2207,hint,SIP/2207
exten => 2208,hint,SIP/2208
exten => 2209,hint,SIP/2209
exten => 2210,hint,SIP/2210
exten => 2211,hint,SIP/2211
exten => 2212,hint,SIP/2212
exten => 2213,hint,SIP/2213
exten => 2214,hint,SIP/2214
exten => 2215,hint,SIP/2215
exten => 2216,hint,SIP/2216
exten => 2217,hint,SIP/2217
exten => 2218,hint,SIP/2218
exten => 2219,hint,SIP/2219
exten => 2220,hint,SIP/2220
exten => 2221,hint,SIP/2221
exten => 2222,hint,SIP/2222
exten => 2223,hint,SIP/2223
exten => 2224,hint,SIP/2224
exten => 2225,hint,SIP/2225
exten => 2226,hint,SIP/2226
exten => 2227,hint,SIP/2227
exten => 2228,hint,SIP/2228
exten => 2229,hint,SIP/2229
exten => 2230,hint,SIP/2230
exten => 2231,hint,SIP/2231
exten => 2232,hint,SIP/2232
exten => 2233,hint,SIP/2233
exten => 2234,hint,SIP/2234
exten => 2235,hint,SIP/2235
exten => 2236,hint,SIP/2236
exten => 2237,hint,SIP/2237
exten => 2238,hint,SIP/2238
exten => 2239,hint,SIP/2239
exten => 2240,hint,SIP/2240
exten => 2241,hint,SIP/2241
exten => 2242,hint,SIP/2242
exten => 2243,hint,SIP/2243
exten => 2244,hint,SIP/2244
exten => 2245,hint,SIP/2245
exten => 2246,hint,SIP/2246
exten => 2247,hint,SIP/2247
exten => 2248,hint,SIP/2248
exten => 2249,hint,SIP/2249
exten => 2250,hint,SIP/2250
exten => 2251,hint,SIP/2251
exten => 2252,hint,SIP/2252
exten => 2253,hint,SIP/2253
exten => 2254,hint,SIP/2254
exten => 2255,hint,SIP/2255
exten => 2256,hint,SIP/2256
exten => 2257,hint,SIP/2257
exten => 2258,hint,SIP/2258
exten => 2259,hint,SIP/2259
exten => 2260,hint,SIP/2260
exten => 2261,hint,SIP/2261
exten => 2262,hint,SIP/2262
exten => 2263,hint,SIP/2263
exten => 2264,hint,SIP/2264
exten => 2265,hint,SIP/2265
exten => 2266,hint,SIP/2266
exten => 2267,hint,SIP/2267
exten => 2268,hint,SIP/2268
exten => 2269,hint,SIP/2269
exten => 2270,hint,SIP/2270
exten => 2271,hint,SIP/2271
exten => 2272,hint,SIP/2272
exten => 2273,hint,SIP/2273
exten => 2274,hint,SIP/2274
exten => 2275,hint,SIP/2275
exten => 2276,hint,SIP/2276
exten => 2277,hint,SIP/2277
exten => 2278,hint,SIP/2278
exten => 2279,hint,SIP/2279
exten => 2280,hint,SIP/2280
exten => 2281,hint,SIP/2281
exten => 2282,hint,SIP/2282
exten => 2283,hint,SIP/2283
exten => 2284,hint,SIP/2284
exten => 2285,hint,SIP/2285
exten => 2286,hint,SIP/2286
exten => 2287,hint,SIP/2287
exten => 2288,hint,SIP/2288
exten => 2289,hint,SIP/2289
exten => 2290,hint,SIP/2290
exten => 2291,hint,SIP/2291
exten => 2292,hint,SIP/2292
exten => 2293,hint,SIP/2293
exten => 2294,hint,SIP/2294
exten => 2295,hint,SIP/2295
exten => 2296,hint,SIP/2296
exten => 2297,hint,SIP/2297
exten => 2298,hint,SIP/2298
exten => 2299,hint,SIP/2299
exten => 2300,hint,SIP/2300
exten => 2301,hint,SIP/2301
exten => 2302,hint,SIP/2302
exten => 2303,hint,SIP/2303
exten => 2304,hint,SIP/2304
exten => 2305,hint,SIP/2305
exten => 2306,hint,SIP/2306
exten => 2307,hint,SIP/2307
exten => 2308,hint,SIP/2308
exten => 2309,hint,SIP/2309
exten => 2310,hint,SIP/2310
exten => 2311,hint,SIP/2311
exten => 2312,hint,SIP/2312
exten => 2313,hint,SIP/2313
exten => 2314,hint,SIP/2314
exten => 2315,hint,SIP/2315
exten => 2316,hint,SIP/2316
exten => 2317,hint,SIP/2317
exten => 2318,hint,SIP/2318
exten => 2319,hint,SIP/2319
exten => 2320,hint,SIP/2320
exten => 2321,hint,SIP/2321
exten => 2322,hint,SIP/2322
exten => 2323,hint,SIP/2323
exten => 2324,hint,SIP/2324
exten => 2325,hint,SIP/2325
exten => 2326,hint,SIP/2326
exten => 2327,hint,SIP/2327
exten => 2328,hint,SIP/2328
exten => 2329,hint,SIP/2329
exten => 2330,hint,SIP/2330
exten => 2331,hint,SIP/2331
exten => 2332,hint,SIP/2332
exten => 2333,hint,SIP/2333
exten => 2334,hint,SIP/2334
exten => 2335,hint,SIP/2335
exten => 2336,hint,SIP/2336
exten => 2337,hint,SIP/2337
exten => 2338,hint,SIP/2338
exten => 2339,hint,SIP/2339
exten => 2340,hint,SIP/2340
exten => 2341,hint,SIP/2341
exten => 2342,hint,SIP/2342
exten => 2343,hint,SIP/2343
exten => 2344,hint,SIP/2344
exten => 2345,hint,SIP/2345
exten => 2346,hint,SIP/2346
exten => 2347,hint,SIP/2347
exten => 2348,hint,SIP/2348
exten => 2349,hint,SIP/2349
exten => 2350,hint,SIP/2350
exten => 2351,hint,SIP/2351
exten => 2352,hint,SIP/2352
exten => 2353,hint,SIP/2353
exten => 2354,hint,SIP/2354
exten => 2355,hint,SIP/2355
exten => 2356,hint,SIP/2356
exten => 2357,hint,SIP/2357
exten => 2358,hint,SIP/2358
exten => 2359,hint,SIP/2359
exten => 2360,hint,SIP/2360
exten => 2361,hint,SIP/2361
exten => 2362,hint,SIP/2362
exten => 2363,hint,SIP/2363
exten => 2364,hint,SIP/2364
exten => 2365,hint,SIP/2365
exten => 2366,hint,SIP/2366
exten => 2367,hint,SIP/2367
exten => 2368,hint,SIP/2368
exten => 2369,hint,SIP/2369
exten => 2370,hint,SIP/2370
exten => 2371,hint,SIP/2371
exten => 2372,hint,SIP/2372
exten => 2373,hint,SIP/2373
exten => 2374,hint,SIP/2374
exten => 2375,hint,SIP/2375
exten => 2376,hint,SIP/2376
exten => 2377,hint,SIP/2377
exten => 2378,hint,SIP/2378
exten => 2379,hint,SIP/2379
exten => 2380,hint,SIP/2380
exten => 2381,hint,SIP/2381
exten => 2382,hint,SIP/2382
exten => 2383,hint,SIP/2383
exten => 2384,hint,SIP/2384
exten => 2385,hint,SIP/2385
exten => 2386,hint,SIP/2386
exten => 2387,hint,SIP/2387
exten => 2388,hint,SIP/2388
exten => 2389,hint,SIP/2389
exten => 2390,hint,SIP/2390
exten => 2391,hint,SIP/2391
exten => 2392,hint,SIP/2392
exten => 2393,hint,SIP/2393
exten => 2394,hint,SIP/2394
exten => 2395,hint,SIP/2395
exten => 2396,hint,SIP/2396
exten => 2397,hint,SIP/2397
exten => 2398,hint,SIP/2398
exten => 2399,hint,SIP/2399
exten => 2400,hint,SIP/2400
exten => 2401,hint,SIP/2401
exten => 2402,hint,SIP/2402
exten => 2403,hint,SIP/2403
exten => 2404,hint,SIP/2404
exten => 2405,hint,SIP/2405
exten => 2406,hint,SIP/2406
exten => 2407,hint,SIP/2407
exten => 2408,hint,SIP/2408
exten => 2409,hint,SIP/2409
exten => 2410,hint,SIP/2410
exten => 2411,hint,SIP/2411
exten => 2412,hint,SIP/2412
exten => 2413,hint,SIP/2413
exten => 2414,hint,SIP/2414
exten => 2415,hint,SIP/2415
exten => 2416,hint,SIP/2416
exten => 2417,hint,SIP/2417
exten => 2418,hint,SIP/2418
exten => 2419,hint,SIP/2419
exten => 2420,hint,SIP/2420
exten => 2421,hint,SIP/2421
exten => 2422,hint,SIP/2422
exten => 2423,hint,SIP/2423
exten => 2424,hint,SIP/2424
exten => 2425,hint,SIP/2425
exten => 2426,hint,SIP/2426
exten => 2427,hint,SIP/2427
exten => 2428,hint,SIP/2428
exten => 2429,hint,SIP/2429
exten => 2430,hint,SIP/2430
exten => 2431,hint,SIP/2431
exten => 2432,hint,SIP/2432
exten => 2433,hint,SIP/2433
exten => 2434,hint,SIP/2434
exten => 2435,hint,SIP/2435
exten => 2436,hint,SIP/2436
exten => 2437,hint,SIP/2437
exten => 2438,hint,SIP/2438
exten => 2439,hint,SIP/2439
exten => 2440,hint,SIP/2440
exten => 2441,hint,SIP/2441
exten => 2442,hint,SIP/2442
exten => 2443,hint,SIP/2443
exten => 2444,hint,SIP/2444
exten => 2445,hint,SIP/2445
exten => 2446,hint,SIP/2446
exten => 2447,hint,SIP/2447
exten => 2448,hint,SIP/2448
exten => 2449,hint,SIP/2449
exten => 2450,hint,SIP/2450
exten => 2451,hint,SIP/2451
exten => 2452,hint,SIP/2452
exten => 2453,hint,SIP/2453
exten => 2454,hint,SIP/2454
exten => 2455,hint,SIP/2455
exten => 2456,hint,SIP/2456
exten => 2457,hint,SIP/2457
exten => 2458,hint,SIP/2458
exten => 2459,hint,SIP/2459
exten => 2460,hint,SIP/2460
exten => 2461,hint,SIP/2461
exten => 2462,hint,SIP/2462
exten => 2463,hint,SIP/2463
exten => 2464,hint,SIP/2464
exten => 2465,hint,SIP/2465
exten => 2466,hint,SIP/2466
exten => 2467,hint,SIP/2467
exten => 2468,hint,SIP/2468
exten => 2469,hint,SIP/2469
exten => 2470,hint,SIP/2470
exten => 2471,hint,SIP/2471
exten => 2472,hint,SIP/2472
exten => 2473,hint,SIP/2473
exten => 2474,hint,SIP/2474
exten => 2475,hint,SIP/2475
exten => 2476,hint,SIP/2476
exten => 2477,hint,SIP/2477
exten => 2478,hint,SIP/2478
exten => 2479,hint,SIP/2479
exten => 2480,hint,SIP/2480
exten => 2481,hint,SIP/2481
exten => 2482,hint,SIP/2482
exten => 2483,hint,SIP/2483
exten => 2484,hint,SIP/2484
exten => 2485,hint,SIP/2485
exten => 2486,hint,SIP/2486
exten => 2487,hint,SIP/2487
exten => 2488,hint,SIP/2488
exten => 2489,hint,SIP/2489
exten => 2490,hint,SIP/2490
exten => 2491,hint,SIP/2491
exten => 2492,hint,SIP/2492
exten => 2493,hint,SIP/2493
exten => 2494,hint,SIP/2494
exten => 2495,hint,SIP/2495
exten => 2496,hint,SIP/2496
exten => 2497,hint,SIP/2497
exten => 2498,hint,SIP/2498
exten => 2499,hint,SIP/2499
exten => 2500,hint,SIP/2500
exten => 2501,hint,SIP/2501
exten => 2502,hint,SIP/2502
exten => 2503,hint,SIP/2503
exten => 2504,hint,SIP/2504
exten => 2505,hint,SIP/2505
exten => 2506,hint,SIP/2506
exten => 2507,hint,SIP/2507
exten => 2508,hint,SIP/2508
exten => 2509,hint,SIP/2509
exten => 2510,hint,SIP/2510
exten => 2511,hint,SIP/2511
exten => 2512,hint,SIP/2512
exten => 2513,hint,SIP/2513
exten => 2514,hint,SIP/2514
exten => 2515,hint,SIP/2515
exten => 2516,hint,SIP/2516
exten => 2517,hint,SIP/2517
exten => 2518,hint,SIP/2518
exten => 2519,hint,SIP/2519
exten => 2520,hint,SIP/2520
exten => 2521,hint,SIP/2521
exten => 2522,hint,SIP/2522
exten => 2523,hint,SIP/2523
exten => 2524,hint,SIP/2524
exten => 2525,hint,SIP/2525
exten => 2526,hint,SIP/2526
exten => 2527,hint,SIP/2527
exten => 2528,hint,SIP/2528
exten => 2529,hint,SIP/2529
exten => 2530,hint,SIP/2530
exten => 2531,hint,SIP/2531
exten => 2532,hint,SIP/2532
exten => 2533,hint,SIP/2533
exten => 2534,hint,SIP/2534
exten => 2535,hint,SIP/2535
exten => 2536,hint,SIP/2536
exten => 2537,hint,SIP/2537
exten => 2538,hint,SIP/2538
exten => 2539,hint,SIP/2539
exten => 2540,hint,SIP/2540
exten => 2541,hint,SIP/2541
exten => 2542,hint,SIP/2542
exten => 2543,hint,SIP/2543
exten => 2544,hint,SIP/2544
exten => 2545,hint,SIP/2545
exten => 2546,hint,SIP/2546
exten => 2547,hint,SIP/2547
exten => 2548,hint,SIP/2548
exten => 2549,hint,SIP/2549
exten => 2550,hint,SIP/2550
exten => 2551,hint,SIP/2551
exten => 2552,hint,SIP/2552
exten => 2553,hint,SIP/2553
exten => 2554,hint,SIP/2554
exten => 2555,hint,SIP/2555
exten => 2556,hint,SIP/2556
exten => 2557,hint,SIP/2557
exten => 2558,hint,SIP/2558
exten => 2559,hint,SIP/2559
exten => 2560,hint,SIP/2560
exten => 2561,hint,SIP/2561
exten => 2562,hint,SIP/2562
exten => 2563,hint,SIP/2563
exten => 2564,hint,SIP/2564
exten => 2565,hint,SIP/2565
exten => 2566,hint,SIP/2566
exten => 2567,hint,SIP/2567
exten => 2568,hint,SIP/2568
exten => 2569,hint,SIP/2569
exten => 2570,hint,SIP/2570
exten => 2571,hint,SIP/2571
exten => 2572,hint,SIP/2572
exten => 2573,hint,SIP/2573
exten => 2574,hint,SIP/2574
exten => 2575,hint,SIP/2575
exten => 2576,hint,SIP/2576
exten => 2577,hint,SIP/2577
exten => 2578,hint,SIP/2578
exten => 2579,hint,SIP/2579
exten => 2580,hint,SIP/2580
exten => 2581,hint,SIP/2581
exten => 2582,hint,SIP/2582
exten => 2583,hint,SIP/2583
exten => 2584,hint,SIP/2584
exten => 2585,hint,SIP/2585
exten => 2586,hint,SIP/2586
exten => 2587,hint,SIP/2587
exten => 2588,hint,SIP/2588
exten => 2589,hint,SIP/2589
exten => 2590,hint,SIP/2590
exten => 2591,hint,SIP/2591
exten => 2592,hint,SIP/2592
exten => 2593,hint,SIP/2593
exten => 2594,hint,SIP/2594
exten => 2595,hint,SIP/2595
exten => 2596,hint,SIP/2596
exten => 2597,hint,SIP/2597
exten => 2598,hint,SIP/2598
exten => 2599,hint,SIP/2599
exten => 2600,hint,SIP/2600




exten => 690009010100,1,Noop(VDN TRANSFERENCIA ${CALLERID(num)})
exten => 690009010100,n,wait(0.15)
;exten => 690009010100,n,Set(U2U=${SIP_HEADER(User-to-User)}
exten => 690009010100,n,Noop(User-to-User: ${U2U})
exten => 690009010100,n,Set(SPEXTEN=${EXTEN})
exten => 690009010100,n,GoTo(Inbound,6014863004,1)
exten => 690009010100,n,Hangup


exten => 690009010119,1,Noop(VDN TRANSFERENCIA ${CALLERID(num)})
exten => 690009010119,n,wait(0.15)
;exten => 690009010119,n,Set(U2U=${SIP_HEADER(User-to-User)}
exten => 690009010119,n,Noop(User-to-User: ${U2U})
exten => 690009010119,n,Set(SPEXTEN=${EXTEN})
exten => 690009010119,n,GoTo(Inbound,6014863004,1)
exten => 690009010119,n,Hangup


exten => 69690009010119,1,Noop(VDN TRANSFERENCIA ${CALLERID(num)} V2)
exten => 69690009010119,n,wait(0.15)
exten => 69690009010119,n,Noop(User-to-User: ${U2U})
;Set(SIP_HEADER(User-to-User=${U2U})
exten => 69690009010119,n,Set(__U2U=${U2U})
exten => 69690009010119,n,Set(CAMP_ID=1)
exten => 69690009010119,n,Noop(User-to-User: ${U2U})
exten => 69690009010119,n,Set(SPEXTEN=${EXTEN})
;exten => 69690009010119,n,Dial(SIP/AST8203/70${EXTEN:2},30)
exten => 69690009010119,n,Gosub(Inbound,6014863004,1)
exten => 69690009010119,n,Hangup

exten => 69690009010105,1,Noop(VDN TRANSFERENCIA ${CALLERID(num)} V2)
exten => 69690009010105,n,wait(0.15)
exten => 69690009010105,n,Noop(User-to-User: ${U2U})
;exten => 69690009010105,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 69690009010105,n,Set(__U2U=${U2U})
exten => 69690009010105,n,Set(CAMP_ID=4)
exten => 69690009010105,n,Noop(User-to-User: ${U2U})
exten => 69690009010105,n,Set(SPEXTEN=${EXTEN})
;exten => 69690009010105,n,Dial(SIP/AST8203/70${EXTEN:2},30)
exten => 69690009010105,n,GoSub(Inbound,6014863004,1)
exten => 69690009010105,n,Hangup

exten => 69690009010100,1,Noop(VDN TRANSFERENCIA ${CALLERID(num)})
exten => 69690009010100,n,wait(0.15)
exten => 69690009010100,n,Noop(User-to-User: ${U2U})
exten => 69690009010100,n,Set(__U2U=${U2U})
exten => 69690009010100,n,Noop(User-to-User: ${U2U})
;exten => 69690009010100,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 69690009010100,n,Set(CAMP_ID=17)
exten => 69690009010100,n,Noop(User-to-User: ${U2U})
exten => 69690009010100,n,Set(SPEXTEN=${EXTEN})
exten => 69690009010100,n,GoSub(Inbound,6014863004,1)
exten => 69690009010100,n,Hangup

exten => 69690009010110,1,Noop(VDN TRANSFERENCIA ${CALLERID(num)})
exten => 69690009010110,n,wait(0.15)
exten => 69690009010110,n,Noop(User-to-User: ${U2U})
;exten => 69690009010110,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 69690009010110,n,Set(__U2U=${U2U})
;exten => 69690009010110,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 69690009010110,n,Set(CAMP_ID=27)
exten => 69690009010110,n,Noop(User-to-User: ${U2U})
exten => 69690009010110,n,Set(SPEXTEN=${EXTEN})
exten => 69690009010110,n,GoSub(Inbound,6014863004,1)
exten => 69690009010110,n,Hangup

exten => 69690009010114,1,Noop(VDN TRANSFERENCIA ${CALLERID(num)})
exten => 69690009010114,n,wait(0.15)
exten => 69690009010114,n,Noop(User-to-User: ${U2U})
exten => 69690009010114,n,Set(__U2U=${U2U})
;exten => 69690009010114,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 69690009010114,n,Set(CAMP_ID=6)
exten => 69690009010114,n,Noop(User-to-User: ${U2U})
exten => 69690009010114,n,Set(SPEXTEN=${EXTEN})
exten => 69690009010114,n,GoSub(Inbound,6014863004,1)
exten => 69690009010114,n,Hangup

exten => 88690009010114,1,Noop(VDN PRUEBAS TRANSFERENCIA ${CALLERID(num)})
exten => 88690009010114,n,wait(0.15)
exten => 88690009010114,n,Noop(User-to-User: ${U2U})
;exten => 88690009010114,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 88690009010114,n,Set(CAMP_ID=4)
exten => 88690009010114,n,Noop(User-to-User: ${U2U})
exten => 88690009010114,n,Set(SPEXTEN=${EXTEN})
exten => 88690009010114,n,GoSub(Inbound,6014863004,1)
;exten => 88690009010114,n,Dial(SIP/2033,tTor)
;exten => 88690009010114,n,GoTo(Inbound,6014863004,1)
exten => 88690009010114,n,Hangup

exten => 6966424X,1,Noop(Transferencias ${CALLERID(num)} trunkinbound)
exten => 6966424X,n,GoSub(Encuestas,${EXTEN:2},1)
exten => 6966424X,n,Hangup()

exten => _6966424X,1,Noop(Transferencias _ ${CALLERID(num)} trunkinbound)
exten => _6966424X,n,GoSub(Encuestas,${EXTEN:2},1)
exten => _6966424X,n,Hangup()


;69664244

;69690009010105

;69690009010119


    ;     690009010100

;exten => _6014863004,n(libre),System(touch /tmp/extension_lock_${ExtDisp}.lock)
; same => n,Dial(SIP/${ExtDisp},20)
; same => n,Hangup()

exten => 9212XXX,1,Noop(transferencia Interna)
exten => 9212XXX,n,Dial(SIP/${EXTEN:3},30)
exten => 9212XXX,n,Hangup()

exten => _91011010,1,Noop(Campaña ETB PRUEBAS ${CALLERID(num)})
exten => _91011010,n,wait(1)
;exten => 91011010,n,GoTo(Inbound,6014863004,1)
exten => _91011010,n,Set(U2U=${SIP_HEADER(User-to-User)}
exten => _91011010,n,Set(SIP_HEADER(User-to-User=${U2U})
exten => _91011010,n,Set(SPEXTEN=${EXTEN})
;exten => 91011010,n,GoTo(Inbound,6014863004,1)
;exten => _91011010,n,Dial(SIP/VC887/6014863004,60)
;exten => 9010124,n,set(Txn=2705610)
;exten => 9010124,n,goto(VoicebotV2,75098,1)
exten => _91011010,n,Hangup()
exten => _91011007,1,Noop(Campaña ETB PRUEBAS ${CALLERID(num)})
exten => _91011007,n,wait(0.15)
;exten => _91011007,n,Set(U2U=${SIP_HEADER(User-to-User)}
;exten => _91011007,n,Set(SIP_HEADER(User-to-User=${U2U})
exten => _91011007,n,Set(SPEXTEN=${EXTEN})
exten => _91011007,n,GoTo(Inbound,6014863004,1)
exten => _91011007,n,Hangup()

exten => 91011007,1,Noop(Campaña ETB PRUEBAS ${CALLERID(num)})
exten => 91011007,n,wait(0.15)
;exten => 91011007,n,Set(U2U=${SIP_HEADER(User-to-User)}
;exten => 91011007,n,Set(SIP_HEADER(User-to-User=${U2U})
exten => 91011007,n,Set(SPEXTEN=${EXTEN})
exten => 91011007,n,GoTo(Inbound,6014863004,1)
exten => 91011007,n,Hangup()

exten => 6996xxxxxxxxxx,1,Noop(Campaña ETB Transferencia ${CALLERID(num)} +6996 a ${EXTEN})
exten => 6996xxxxxxxxxx,n,wait(0.15)
exten => 6996xxxxxxxxxx,n,Set(SPEXTEN=${EXTEN:2})
exten => 6996xxxxxxxxxx,n,AGI(mysoulphone/SP_consulta_usr.agi,${CC_id})
exten => 6996xxxxxxxxxx,n,Agi(mysoulphone/registra_cliente.agi,2,${CC_id},${agent},${UNIQUEID})
exten => 6996xxxxxxxxxx,n,AGI(mysoulphone/SP_CallEnd.agi,${CC_id})
exten => 6996xxxxxxxxxx,n,MixMonitor(${CC_id}.wav,a)
exten => 6996xxxxxxxxxx,n,AGI(mysoulphone/Rename.agi,/tmp/soul/Recordings/Original/${CC_id}.wav)
exten => 6996xxxxxxxxxx,n,GoTo(Inbound,6014863004,1)
exten => 6996xxxxxxxxxx,n,Hangup()

exten => 6969xxxxxxxxxx,1,Noop(Campaña ETB Transferencia ${CALLERID(num)} +6969 a ${EXTEN})
exten => 6969xxxxxxxxxx,n,wait(0.15)
exten => 6969xxxxxxxxxx,n,Set(SPEXTEN=${EXTEN:2})
exten => 6969xxxxxxxxxx,n,AGI(mysoulphone/SP_consulta_usr.agi,${CC_id})
exten => 6969xxxxxxxxxx,n,Agi(mysoulphone/registra_cliente.agi,2,${CC_id},${agent},${UNIQUEID})
exten => 6969xxxxxxxxxx,n,AGI(mysoulphone/SP_CallEnd.agi,${CC_id})
exten => 6969xxxxxxxxxx,n,MixMonitor(${CC_id}.wav,a)
exten => 6969xxxxxxxxxx,n,AGI(mysoulphone/Rename.agi,/tmp/soul/Recordings/Original/${CC_id}.wav)
exten => 6969xxxxxxxxxx,n,GoTo(Inbound,6014863004,1)
exten => 6969xxxxxxxxxx,n,Hangup()

;69690009010119

exten => 960209010124,1,Noop(Campaña ETB HOGARES-POSTVENTAS ${CALLERID(num)})
exten => 960209010124,n,Answer()
exten => 960209010124,n,wait(0.15)
exten => 960209010124,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010124,n,Noop(User-to-User: ${U2U})
exten => 960209010124,n,Set(CAMP_ID=4)
exten => 960209010124,n,Set(SPEXTEN=${EXTEN})
exten => 960209010124,n,GoTo(Inbound,6014863004,1)
exten => 960209010124,n,Hangup()

exten => 960209010125,1,Noop(Campaña ETB CANCELACION-TOTAL_FTTH ${CALLERID(num)})
exten => 960209010125,n,Answer()
exten => 960209010125,n,wait(0.15)
exten => 960209010125,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010125,n,Noop(User-to-User: ${U2U})
exten => 960209010125,n,Set(SPEXTEN=${EXTEN})
exten => 960209010125,n,Set(CAMP_ID=5)
exten => 960209010125,n,GoTo(Inbound,6014863004,1)
exten => 960209010125,n,Hangup()

exten => 960209010126,1,Noop(Campaña ETB CROSS_POSVENTA_CAMBIO_DE_PLAN-COS ${CALLERID(num)})
exten => 960209010126,n,Answer()
exten => 960209010126,n,wait(0.15)
exten => 960209010126,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010126,n,Noop(User-to-User: ${U2U})
exten => 960209010126,n,Set(CAMP_ID=6)
exten => 960209010126,n,Set(SPEXTEN=${EXTEN})
exten => 960209010126,n,GoTo(Inbound,6014863004,1)
exten => 960209010126,n,Hangup()

exten => 960209010127,1,Noop(Campaña ETB HOGARES-POSTVENTA_PQR_PLATINO ${CALLERID(num)})
exten => 960209010127,n,Answer()
exten => 960209010127,n,wait(0.15)
exten => 960209010127,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010127,n,Set(CAMP_ID=7)
exten => 960209010127,n,Noop(User-to-User: ${U2U})
exten => 960209010127,n,Set(SPEXTEN=${EXTEN})
exten => 960209010127,n,GoTo(Inbound,6014863004,1)
exten => 960209010127,n,Hangup()

exten => 960209010128,1,Noop(Campaña ETB HOGARES-POSTVENTA_TRASLADOS_COBRE ${CALLERID(num)})
exten => 960209010128,n,Answer()
exten => 960209010128,n,wait(0.15)
exten => 960209010128,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010128,n,Noop(User-to-User: ${U2U})
exten => 960209010128,n,Set(CAMP_ID=8)
exten => 960209010128,n,Set(SPEXTEN=${EXTEN})
exten => 960209010128,n,GoTo(Inbound,6014863004,1)
exten => 960209010128,n,Hangup()

exten => 960209010129,1,Noop(Campaña ETB HOGARES-POSTVENTA_TRASLADOS_FIBRA ${CALLERID(num)})
exten => 960209010129,n,Answer()
exten => 960209010129,n,wait(0.15)
exten => 960209010129,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010129,n,Noop(User-to-User: ${U2U})
exten => 960209010129,n,Set(CAMP_ID=9)
exten => 960209010129,n,Set(SPEXTEN=${EXTEN})
exten => 960209010129,n,GoTo(Inbound,6014863004,1)
exten => 960209010129,n,Hangup()

exten => 960209010130,1,Noop(Campaña ETB HOGARES-POSTVENTA_TRAMITES_COBRE ${CALLERID(num)})
exten => 960209010130,n,Answer()
exten => 960209010130,n,wait(0.15)
exten => 960209010130,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010130,n,Noop(User-to-User: ${U2U})
exten => 960209010130,n,Set(CAMP_ID=10)
exten => 960209010130,n,Set(SPEXTEN=${EXTEN})
exten => 960209010130,n,GoTo(Inbound,6014863004,1)
exten => 960209010130,n,Hangup()

exten => 960209010123,1,Noop(Campaña ETB HOGARES-SOPORTE_TECNICO_WIFI ${CALLERID(num)})
exten => 960209010123,n,Answer()
exten => 960209010123,n,wait(0.15)
exten => 960209010123,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010123,n,Noop(User-to-User: ${U2U})
exten => 960209010123,n,Set(CAMP_ID=26)
exten => 960209010123,n,Set(SPEXTEN=${EXTEN})
exten => 960209010123,n,GoTo(Inbound,6014863004,1)
exten => 960209010123,n,Hangup()

exten => 960209010131,1,Noop(Campaña ETB HOGARES-POSTVENTA_TRAMITES_FIBRA ${CALLERID(num)})
exten => 960209010131,n,Answer()
exten => 960209010131,n,wait(0.15)
exten => 960209010131,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010131,n,Set(CAMP_ID=11)
exten => 960209010131,n,Noop(User-to-User: ${U2U})
exten => 960209010131,n,Set(SPEXTEN=${EXTEN})
exten => 960209010131,n,GoTo(Inbound,6014863004,1)
exten => 960209010131,n,Hangup()

exten => 960209010132,1,Noop(Campaña ETB HOGARES-POSTVENTA_QUEJAS_RECURSOS_COBRE ${CALLERID(num)})
exten => 960209010132,n,Answer()
exten => 960209010132,n,wait(0.15)
exten => 960209010132,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010132,n,Set(CAMP_ID=12)
exten => 960209010132,n,Noop(User-to-User: ${U2U})
exten => 960209010132,n,Set(SPEXTEN=${EXTEN})
exten => 960209010132,n,GoTo(Inbound,6014863004,1)
exten => 960209010132,n,Hangup()

exten => 960209010133,1,Noop(Campaña ETB HOGARES-POSTVENTA_QUEJAS_RECURSOS_FIBRA_2 ${CALLERID(num)})
exten => 960209010133,n,Answer()
exten => 960209010133,n,wait(0.15)
exten => 960209010133,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010133,n,Noop(User-to-User: ${U2U})
exten => 960209010133,n,Set(CAMP_ID=13)
exten => 960209010133,n,Set(SPEXTEN=${EXTEN})
exten => 960209010133,n,GoTo(Inbound,6014863004,1)
exten => 960209010133,n,Hangup()

exten => 960209010134,1,Noop(Campaña ETB HOGARES-POSTVENTA_PROCESO_EMPRESA-COS ${CALLERID(num)})
exten => 960209010134,n,Answer()
exten => 960209010134,n,wait(0.15)
exten => 960209010134,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010134,n,Noop(User-to-User: ${U2U})
exten => 960209010134,n,Set(CAMP_ID=14)
exten => 960209010134,n,Set(SPEXTEN=${EXTEN})
exten => 960209010134,n,GoTo(Inbound,6014863004,1)
exten => 960209010134,n,Hangup()

exten => 960209010135,1,Noop(Campaña ETB MIGRACIONES SOPORTE-COS ${CALLERID(num)})
exten => 960209010135,n,Answer()
exten => 960209010135,n,wait(0.15)
exten => 960209010135,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010135,n,Noop(User-to-User: ${U2U})
exten => 960209010135,n,Set(CAMP_ID=15)
exten => 960209010135,n,Set(SPEXTEN=${EXTEN})
exten => 960209010135,n,GoTo(Inbound,6014863004,1)
exten => 960209010135,n,Hangup()

exten => 960209010136,1,Noop(Campaña ETB CANCELACION-TOTAL_PLATINO ${CALLERID(num)})
exten => 960209010136,n,Answer()
exten => 960209010136,n,wait(0.15)
exten => 960209010136,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010136,n,Noop(User-to-User: ${U2U})
exten => 960209010136,n,Set(CAMP_ID=16)
exten => 960209010136,n,Set(SPEXTEN=${EXTEN})
exten => 960209010136,n,GoTo(Inbound,6014863004,1)
exten => 960209010136,n,Hangup()

exten => 960209010114,1,Noop(Campaña ETB HOGARES-SOPORTE_TECNICO_PLATINO ${CALLERID(num)})
exten => 960209010114,n,Answer()
exten => 960209010114,n,wait(0.15)
exten => 960209010114,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010114,n,Set(SPEXTEN=${EXTEN})
exten => 960209010114,n,Noop(User-to-User: ${U2U})
exten => 960209010114,n,Set(CAMP_ID=17)
exten => 960209010114,n,GoTo(Inbound,6014863004,1)
exten => 960209010114,n,Hangup

exten => 960209010115,1,Noop(Campaña ETB HOGARES-SOPORTE_TECNICO_COBRE ${CALLERID(num)})
exten => 960209010115,n,Answer()
exten => 960209010115,n,wait(0.15)
exten => 960209010115,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010115,n,Noop(User-to-User: ${U2U})
exten => 960209010115,n,Set(CAMP_ID=18)
exten => 960209010115,n,Set(SPEXTEN=${EXTEN})
exten => 960209010115,n,GoTo(Inbound,6014863004,1)
exten => 960209010115,n,Hangup

exten => 960209010116,1,Noop(Campaña ETB HOGARES-SOPORTE_TECNICO_FIBRA_2 ${CALLERID(num)})
exten => 960209010116,n,Answer()
exten => 960209010116,n,wait(0.15)
exten => 960209010116,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010116,n,Noop(User-to-User: ${U2U})
exten => 960209010116,n,Set(CAMP_ID=19)
exten => 960209010116,n,Set(SPEXTEN=${EXTEN})
exten => 960209010116,n,GoTo(Inbound,6014863004,1)
exten => 960209010116,n,Hangup

exten => 960209010117,1,Noop(Campaña ETB HOGARES-SOPORTE_FALLAS MASIVAS ${CALLERID(num)})
exten => 960209010117,n,Answer()
exten => 960209010117,n,wait(0.15)
exten => 960209010117,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010117,n,Noop(User-to-User: ${U2U})
exten => 960209010117,n,Set(CAMP_ID=20)
exten => 960209010117,n,Set(SPEXTEN=${EXTEN})
exten => 960209010117,n,GoTo(Inbound,6014863004,1)
exten => 960209010117,n,Hangup

exten => 960209010118,1,Noop(Campaña ETB HOGARES-SOPORTE_TECNICO ${CALLERID(num)})
exten => 960209010118,n,Answer()
exten => 960209010118,n,wait(0.15)
exten => 960209010118,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010118,n,Noop(User-to-User: ${U2U})
exten => 960209010118,n,Set(CAMP_ID=21)
exten => 960209010118,n,Set(SPEXTEN=${EXTEN})
exten => 960209010118,n,GoTo(Inbound,6014863004,1)
exten => 960209010118,n,Hangup

exten => 960209010119,1,Noop(Campaña ETB HOGARES_SOPORTE_PLATINO-COS ${CALLERID(num)})
exten => 960209010119,n,Answer()
exten => 960209010119,n,wait(0.15)
exten => 960209010119,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010119,n,Noop(User-to-User: ${U2U})
exten => 960209010119,n,Set(CAMP_ID=22)
exten => 960209010119,n,Set(SPEXTEN=${EXTEN})
exten => 960209010119,n,GoTo(Inbound,6014863004,1)
exten => 960209010119,n,Hangup

exten => 960209010120,1,Noop(Campaña ETB CANCELACION-TOTAL_COBRE ${CALLERID(num)})
exten => 960209010120,n,Answer()
exten => 960209010120,n,wait(0.15)
exten => 960209010120,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010120,n,Noop(User-to-User: ${U2U})
exten => 960209010120,n,Set(CAMP_ID=23)
exten => 960209010120,n,Set(SPEXTEN=${EXTEN})
exten => 960209010120,n,GoTo(Inbound,6014863004,1)
exten => 960209010120,n,Hangup

exten => 960209010121,1,Noop(Campaña ETB HOGARES-SOPORTE_TECNICO_AGENDADAS ${CALLERID(num)})
exten => 960209010121,n,Answer()
exten => 960209010121,n,wait(0.15)
exten => 960209010121,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010121,n,Noop(User-to-User: ${U2U})
exten => 960209010121,n,Set(CAMP_ID=24)
exten => 960209010121,n,Set(SPEXTEN=${EXTEN})
exten => 960209010121,n,GoTo(Inbound,6014863004,1)
exten => 960209010121,n,Hangup

exten => 960209010122,1,Noop(Campaña ETB HOGARES-SOPORTE_TECNICO_DTV ${CALLERID(num)})
exten => 960209010122,n,Answer()
exten => 960209010122,n,wait(0.15)
exten => 960209010122,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209010122,n,Noop(User-to-User: ${U2U})
exten => 960209010122,n,Set(CAMP_ID=25)
exten => 960209010122,n,Set(SPEXTEN=${EXTEN})
exten => 960209010122,n,GoTo(Inbound,6014863004,1)
exten => 960209010122,n,Hangup

exten => 960291011006,1,Noop(Campaña ETB MOVILES-SOPORTE_POSPAGO ${CALLERID(num)})
exten => 960291011006,n,Answer()
exten => 960291011006,n,wait(0.15)
exten => 960291011006,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960291011006,n,Noop(User-to-User: ${U2U})
exten => 960291011006,n,Set(CAMP_ID=37)
;exten => 960291011006,n,Set(CAMP_ID=34)
exten => 960291011006,n,Set(SPEXTEN=${EXTEN})
exten => 960291011006,n,GoTo(Inbound,6014863004,1)
exten => 960291011006,n,Hangup

exten => 690009010XXX,1,Noop(VDN TRANSFERENCIA ${CALLERID(num)})
exten => 690009010XXX,n,Answer()
exten => 690009010XXX,n,wait(0.15)
exten => 690009010XXX,n,Set(U2U=${SIP_HEADER(User-to-User)}
exten => 690009010XXX,n,Noop(User-to-User: ${U2U})
;exten => 960209010114,n,Set(CAMP_ID=)
exten => 690009010XXX,n,Set(SPEXTEN=${EXTEN})
exten => 690009010XXX,n,GoTo(Inbound,6014863004,1)
exten => 690009010XXX,n,Hangup

exten => 960209014357,1,Noop(Campaña PRUEBAS Mario ${CALLERID(num)})
exten => 960209014357,n,Answer()
exten => 960209014357,n,wait(0.15)
;exten => 960209014357,n,Set(U2U=${SIP_HEADER(User-to-User)}
;exten => 960209014357,n,Noop(User-to-User: ${U2U})
;exten => 960209014357,n,Queue(Q3,tT)
exten => 960209014357,n,Set(SPEXTEN=${EXTEN})
exten => 960209014357,n,GoTo(Inbound,6014863004,1)
exten => 960209014357,n,Hangup


;MOVILES

exten => 960209030106,1,Noop(Campaña ETB MOVILES-POSTVENTA_MOVILES_DEFAULT ${CALLERID(num)})
exten => 960209030106,n,Answer()
exten => 960209030106,n,wait(0.15)
exten => 960209030106,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209030106,n,Noop(User-to-User: ${U2U})
exten => 960209030106,n,Set(CAMP_ID=32)
exten => 960209030106,n,Set(SPEXTEN=${EXTEN})
exten => 960209030106,n,GoTo(Inbound,6014863004,1)
exten => 960209030106,n,Hangup

exten => 960209030107,1,Noop(Campaña ETB MOVILES-POSTVENTA_SIM_PREACTIVAS_750 ${CALLERID(num)})
exten => 960209030107,n,Answer()
exten => 960209030107,n,wait(0.15)
exten => 960209030107,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209030107,n,Noop(User-to-User: ${U2U})
exten => 960209030107,n,Set(CAMP_ID=33)
exten => 960209030107,n,Set(SPEXTEN=${EXTEN})
exten => 960209030107,n,GoTo(Inbound,6014863004,1)
exten => 960209030107,n,Hangup

exten => 960209030104,1,Noop(Campaña ETB MOVILES-SOPORTE_PREPAGO ${CALLERID(num)})
exten => 960209030104,n,Answer()
exten => 960209030104,n,wait(0.15)
exten => 960209030104,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209030104,n,Noop(User-to-User: ${U2U})
exten => 960209030104,n,Set(CAMP_ID=34)
exten => 960209030104,n,Set(SPEXTEN=${EXTEN})
exten => 960209030104,n,GoTo(Inbound,6014863004,1)
exten => 960209030104,n,Hangup

exten => 960209030105,1,Noop(Campaña ETB MOVILES-POSTVENTA_POSPAGO ${CALLERID(num)})
exten => 960209030105,n,Answer()
exten => 960209030105,n,wait(0.15)
exten => 960209030105,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209030105,n,Noop(User-to-User: ${U2U})
exten => 960209030105,n,Set(CAMP_ID=35)
exten => 960209030105,n,Set(SPEXTEN=${EXTEN})
exten => 960209030105,n,GoTo(Inbound,6014863004,1)
exten => 960209030105,n,Hangup

;DIDS NUEVOS

exten => 960209030008,1,Noop(Campaña ETB MOVILES-POSTVENTA_PREPAGO ${CALLERID(num)})
exten => 960209030008,n,Answer()
exten => 960209030008,n,wait(0.15)
exten => 960209030008,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209030008,n,Noop(User-to-User: ${U2U})
exten => 960209030008,n,Set(CAMP_ID=32)
;exten => 960209030008,n,Set(CAMP_ID=27)
exten => 960209030008,n,Set(SPEXTEN=${EXTEN})
exten => 960209030008,n,GoTo(Inbound,6014863004,1)
exten => 960209030008,n,Hangup

exten => 960209030009,1,Noop(Campaña ETB MOVILES-POSTVENTA_PREPAGO_PERDIDA_ROBO ${CALLERID(num)})
exten => 960209030009,n,Answer()
exten => 960209030009,n,wait(0.15)
exten => 960209030009,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209030009,n,Noop(User-to-User: ${U2U})
exten => 960209030009,n,set(CAMP_ID=28)
exten => 960209030009,n,Set(SPEXTEN=${EXTEN})
exten => 960209030009,n,GoTo(Inbound,6014863004,1)
exten => 960209030009,n,Hangup

exten => 960209030010,1,Noop(Campaña ETB PREPAGO_POSVENTA_COS ${CALLERID(num)})
exten => 960209030010,n,Answer()
exten => 960209030010,n,wait(0.15)
exten => 960209030010,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209030010,n,Noop(User-to-User: ${U2U})
exten => 960209030010,n,Set(CAMP_ID=29)
exten => 960209030010,n,Set(SPEXTEN=${EXTEN})
exten => 960209030010,n,GoTo(Inbound,6014863004,1)
exten => 960209030010,n,Hangup

exten => 960209030011,1,Noop(Campaña ETB MOVILES-POSTVENTA_POSPAGO_PERDIDA_ROBO ${CALLERID(num)})
exten => 960209030011,n,Answer()
exten => 960209030011,n,wait(0.15)
exten => 960209030011,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209030011,n,Noop(User-to-User: ${U2U})
exten => 960209030011,n,Set(CAMP_ID=30)
exten => 960209030011,n,Set(SPEXTEN=${EXTEN})
exten => 960209030011,n,GoTo(Inbound,6014863004,1)
exten => 960209030011,n,Hangup

exten => 960209030012,1,Noop(Campaña ETB CLIENTES_EMPRESAS_COS ${CALLERID(num)})
exten => 960209030012,n,Answer()
exten => 960209030012,n,wait(0.15)
exten => 960209030012,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 960209030012,n,Noop(User-to-User: ${U2U})
exten => 960209030012,n,Set(CAMP_ID=31)
exten => 960209030012,n,Set(SPEXTEN=${EXTEN})
exten => 960209030012,n,GoTo(Inbound,6014863004,1)
exten => 960209030012,n,Hangup

exten => 96026XXXXXXX,1,Noop(Campaña ETB 12-06 Pymes ${CALLERID(num)})
exten => 96026XXXXXXX,n,Answer()
exten => 96026XXXXXXX,n,wait(0.15)
exten => 96026XXXXXXX,n,Set(U2U=${SIP_HEADER(User-to-User)}
exten => 96026XXXXXXX,n,Noop(User-to-User: ${U2U})
exten => 96026XXXXXXX,n,Set(CAMP_ID=38)
exten => 96026XXXXXXX,n,Set(SPEXTEN=6014863004)
exten => 96026XXXXXXX,n,GoTo(Inbound,6014863004,1)
exten => 96026XXXXXXX,n,Hangup
;        960209021001
exten => 96020XXXXXXX,1,Noop(Campaña ETB 12-06 Pymes ${CALLERID(num)})
exten => 96020XXXXXXX,n,Answer()
exten => 96020XXXXXXX,n,wait(0.15)
exten => 96020XXXXXXX,n,Set(U2U=${SIP_HEADER(User-to-User)}
exten => 96020XXXXXXX,n,Noop(User-to-User: ${U2U})
exten => 96020XXXXXXX,n,Set(CAMP_ID=38)
exten => 96020XXXXXXX,n,Set(SPEXTEN=6014863004)
exten => 96020XXXXXXX,n,GoTo(Inbound,6014863004,1)
exten => 96020XXXXXXX,n,Hangup()



include => Inbound
;include => Interna-transfer
include => vicidial-trunkinbound
;include => Encuestas

[Inbound]

exten => 690009010XXX,1,Noop(VDN TRANSFERENCIA ${CALLERID(num)} X Inbound ${EXTEN})
exten => 690009010XXX,n,wait(0.15)
exten => 690009010XXX,n,Noop(User-to-User: ${U2U})
exten => 690009010XXX,n,Set(U2U=${SIP_HEADER(User-to-User)})
exten => 690009010XXX,n,Noop(User-to-User: ${U2U})
exten => 690009010XXX,n,Set(SPEXTEN=${EXTEN})
exten => 690009010XXX,n,GoTo(Inbound,6014863004,1)
exten => 690009010XXX,n,Hangup


exten => _6014863004,1,NoOp(Llamada entrante con raya ${CALLERID(num)})
exten => _6014863004,n,wait(0.15)
exten => _6014863004,n,GoSub(random_U2U,id${RAND(1,6)},1)
exten => _6014863004,n,Set(U2U_OR=${SIP_HEADER(User-to-User)})
exten => _6014863004,n,Set(U2U=${FILTER(0123456789ABCDEF${U2U_OR})}))
exten => _6014863004,n,Noop(${U2U})
exten => _6014863004,n,AGI(mysoulphone/decode.agi,toASCII,${U2U})
;exten => _6014863004,n,Set(CALLERID(num)=3214034846)
exten => _6014863004,n,Set(CHANNEL(hangup_handler_push)=end_call,63004,1)
exten => _6014863004,n,AGI(mysoulphone/registra_cliente.agi,1,${CALLERID(num)},${EXTEN},${UNIQUEID})
exten => _6014863004,n,AGI(mysoulphone/SP_ConExt.agi,${EXTEN})
;exten => _6014863004,n,,AddQueueMember(Q${VE_CampId},SIP/${ExtDisp})
exten => _6014863004,n,GoTo(extension_avaible)
exten => _6014863004,n(VIP1),AGI(mysoulphone/SP_VIP.agi,${CALLERID(num)},${CAMP_ID})

;exten => _6014863004,n,GotoIf($["${vip_phone}" = "${CALLERID(num)}"]?VIP:)

exten => _6014863004,n,Set(queue_time=${STRFTIME(${EPOCH},,%s)})
exten => _6014863004,n,Set(SPcall_id=${SIP_HEADER(Call-ID)})
exten => _6014863004,n,AGI(mysoulphone/SP_Create_call.agi,${SPcall_id},${CALLERID(num)})
exten => _6014863004,n,Set(CALLERID(name)=${CC_id})
exten => _6014863004,n,AGI(mysoulphone/U2U_Send.agi,${CC_id},${CONVERSION})
exten => _6014863004,n,MixMonitor(/tmp/soul/Recordings/Original/${CC_id}.wav,a)
exten => _6014863004,n,Set(LLAMADAS_ESPERA=${QUEUE_WAITING_COUNT(Q${VE_CampId})})
exten => _6014863004,n,GotoIf($["${VE_CampId}" = "28"]?quePrio1:)
exten => _6014863004,n,GotoIf($["${VE_CampId}" = "30"]?quePrio1:)
exten => _6014863004,n,GotoIf($[${LLAMADAS_ESPERA} > 0]?:direct)
exten => _6014863004,n,GotoIf($["${vip_phone}" = "${CALLERID(num)}"]?VIP:)

exten => _6014863004,n,Set(QUEUE_PRIO=0)
exten => _6014863004,n,Queue(Q${VE_CampId},tT)
exten => _6014863004,n,Hangup()

exten => _6014863004,n(VIP),Noop(Llamada VIP)
exten => _6014863004,n,Set(QUEUE_PRIO=2)
exten => _6014863004,n,Queue(Q${VE_CampId},tT)
exten => _6014863004,n,Hangup()

exten => _6014863004,n(direct),Noop(Llamada entrante No hay Cola)
exten => _6014863004,n,Dial(SIP/${ExtDisp},30)
exten => _6014863004,n,Hangup()

exten => _6014863004,n(quePrio1),Set(QUEUE_PRIO=1)
exten => _6014863004,n,Queue(Q${VE_CampId},tT)
exten => _6014863004,n,Hangup()


;extension_avaible
exten => _6014863004,n(extension_avaible),NoOp(Checking extension avaible)
exten => _6014863004,n,NoOp(Extension disponible: ${ExtDisp})
exten => _6014863004,n,GotoIf($["${ExtDisp}" = ""]?fin:)
;exten => _6014863004,n,AddQueueMember(Q${VE_CampId},SIP/${ExtDisp})
exten => _6014863004,n,Goto(VIP1)
exten => _6014863004,n(fin),Noop(No hay extensiones disponibles)
exten => _6014863004,n,Goto(VIP1)
exten => _6014863004,n,Hangup()

exten => _91011007,1,Noop(Campaña ETB PRUEBAS ${CALLERID(num)})
exten => _91011007,n,wait(0.15)
exten => _91011007,n,Set(U2U=${SIP_HEADER(User-to-User)}
exten => _91011007,n,Set(SIP_HEADER(User-to-User=${U2U})
exten => _91011007,n,GoTo(Inbound,6014863004,1)
exten => _91011007,n,Hangup()


exten => 6014863004,1,NoOp(Llamada entrante sin raya ${CALLERID(num)})
;exten => 6014863004,n,GoSub(random_U2U,id${RAND(1,6)},1)
exten => 6014863004,n,NoOp(Variable heredada ${U2U})
exten => 6014863004,n,GotoIf($["${U2U}" = ""]?:u2u)
exten => 6014863004,n,Set(U2U=${SIP_HEADER(User-to-User)})
;exten => 6014863004,n,Set(SPEXTEN=${EXTEN})
;exten => 6014863004,n,Set(SPEXTEN=960209010114)
exten => 6014863004,n(u2u),Noop(${U2U})
exten => 6014863004,n,AGI(mysoulphone/decode_2.agi,toASCII,${U2U})
;exten => 6014863004,n,Set(CALLERID(num)=3214034846)
exten => 6014863004,n,Set(CHANNEL(hangup_handler_push)=end_call,63004,1)
exten => 6014863004,n,Set(custom_CC=${CEDULA})
exten => 6014863004,n,Noop(${custom_CC})
exten => 6014863004,n,AGI(mysoulphone/registra_cliente.agi,1,${CALLERID(num)},${SPEXTEN},${UNIQUEID},${custom_CC})
exten => 6014863004,n,AGI(mysoulphone/SP_ConExt.agi,${SPEXTEN})
;exten => _6014863004,n,,AddQueueMember(Q${VE_CampId},SIP/${ExtDisp})
exten => 6014863004,n,GoTo(extension_avaible)
exten => 6014863004,n(VIP1),AGI(mysoulphone/SP_VIP.agi,${CALLERID(num)},${VE_CampId})

;exten => _6014863004,n,GotoIf($["${vip_phone}" = "${CALLERID(num)}"]?VIP:)

exten => 6014863004,n,Set(queue_time=${STRFTIME(${EPOCH},,%s)})
exten => 6014863004,n,Set(SPcall_id=${SIP_HEADER(Call-ID)})
exten => 6014863004,n,AGI(mysoulphone/SP_Create_call.agi,${SPcall_id},${CALLERID(num)},${CAMP_ID})
exten => 6014863004,n,Set(CALLERID(name)=${CC_id})
exten => 6014863004,n,AGI(mysoulphone/U2U_Send.agi,${CC_id},${CONVERSION})
exten => 6014863004,n,MixMonitor(/tmp/soul/Recordings/Records/${CC_id}.wav,a)
exten => 6014863004,n,Set(LLAMADAS_ESPERA=${QUEUE_WAITING_COUNT(Q${VE_CampId})})
;exten => 6014863004,n,GotoIf($[${LLAMADAS_ESPERA} > 0]?:direct)
exten => 6014863004,n,GotoIf($["${CAMP_ID}" = "28"]?quePrio1:)
exten => 6014863004,n,GotoIf($["${CAMP_ID}" = "30"]?quePrio1:)
exten => 6014863004,n(VIP2),GotoIf($["${vip_phone}" = "${CALLERID(num)}"]?VIP:)

exten => 6014863004,n,Set(QUEUE_PRIO=0)
exten => 6014863004,n,Answer()
exten => 6014863004,n,Wait(1)
;exten => 6014863004,n,GotoIf(($["${CALLERID(num)}" = "3214034846"]?SEB:))
exten => 6014863004,n,Queue(Q${CAMP_ID},tT)
exten => 6014863004,n,Hangup()

exten => 6014863004,n(VIP),Noop(Llamada VIP)
exten => 6014863004,n,Set(QUEUE_PRIO=2)
;exten => 6014863004,n,GotoIf(($["${CALLERID(num)}" = "3214034846"]?SEB:))
exten => 6014863004,n,Answer()
exten => 6014863004,n,Wait(1)
exten => 6014863004,n,Queue(Q${CAMP_ID},tT)
exten => 6014863004,n,Hangup()

exten => 6014863004,n(quePrio1),Set(QUEUE_PRIO=1)
exten => 6014863004,n,Answer()
exten => 6014863004,n,Wait(1)
exten => 6014863004,n,Queue(Q${CAMP_ID},tT)
exten => 6014863004,n,Hangup()

exten => 6014863004,n(direct),Noop(Llamada entrante No hay Cola)
exten => 6014863004,n,Answer()
exten => 6014863004,n,Wait(1)
exten => 6014863004,n,GotoIf($["${ExtDisp}" = ""]?VIP2:)
exten => 6014863004,n,Dial(SIP/${ExtDisp},30)
exten => 6014863004,n,Hangup()

exten => 6014863004,n(SEB),Noop(LLAMADA SEBAS)
exten => 6014863004,n,wait(1)
;exten => 6014863004,n,Answer()
exten => 6014863004,n,Dial(SIP/2033,30)
exten => 6014863004,n,Hangup()


;extension_avaible
exten => 6014863004,n(extension_avaible),NoOp(Checking extension avaible)
exten => 6014863004,n,NoOp(Extension disponible: ${ExtDisp})
exten => 6014863004,n,GotoIf($["${ExtDisp}" = ""]?fin:)
;exten => 6014863004,n,AddQueueMember(Q${VE_CampId},SIP/${ExtDisp})

exten => 6014863004,n,Goto(VIP1)
exten => 6014863004,n(fin),Noop(No hay extensiones disponibles)
exten => 6014863004,n,Goto(VIP1)
exten => 6014863004,n,Hangup()

[after_queue]
exten => h,1,NoOp(Saliendo de la cola Q1)
same => n,Set(end_queue=${EPOCH})
same => n,Set(queue_wait_time=$[${end_queue} - ${queue_time}])
same => n,NoOp(Tiempo en cola: ${queue_wait_time} segundos)
same => n,Hangup()

[end_call]

exten => 63004,1,Noop(Llamada Finalizada: ${CALLERID(num)} Causa: ${HANGUPCAUSE} Finaliza: ${CHANNEL(hangupsource)})
;exten => 63004,n,AGI(mysoulphone/SP_consulta_usr.agi,${CC_id})
;exten => 63004,n,Agi(mysoulphone/registra_cliente.agi,2,${CC_id},${agent},${UNIQUEID})
exten => 63004,n,AGI(mysoulphone/SP_CallEnd.agi,${CC_id})
exten => 63004,n,StopMixMonitor()
exten => 63004,n,AGI(mysoulphone/SendSurveys.agi,${CC_id},${enc_1},${enc_2},${enc_3})
;exten => 63004,n,Agi(mysoulphone/control_ext.agi,2,${UNIQUEID})
;exten => 63004,n,Set(custom_CC=${CUT(U2U,|,2)})
;exten => 63004,n,AGI(mysoulphone/Rename.agi,/tmp/soul/Recordings/Original/${CC_id}.wav)
exten => 63004,n,Hangup()

[extension_avaible]
exten => 64001,1,NoOp(Checking extension avaible)
 same => n,NoOp(Extension disponible: ${ExtDisp})
 same => n,GotoIf($["${ExtDisp}" = ""]?fin:)
; same => n,AddQueueMember(Q${VE_CampId},SIP/${ExtDisp})
 same => n,return()
 same => n(fin),Noop(No hay extensiones disponibles)
 same => n,return()
 same => n,Hangup()


[check_extension_status]
exten => s,1,NoOp(Checking extension status for active extensions)
 same => n,Set(EXTENSION_LIST=${FILE(/tmp/extensiones_activas.txt)}) ; Lee el archivo con las extensiones activas
 same => n,Set(EXT_COUNT=1)

; Bucle para procesar cada extensión en EXTENSION_LIST
 same => n(loop),GotoIf($[${EXT_COUNT} > ${FIELDQTY(EXTENSION_LIST,-)}]?end)

 same => n,Set(EXTENSION=${CUT(EXTENSION_LIST,-,${EXT_COUNT})})
 same => n,NoOp(Processing extension: ${EXTENSION})
 same => n,ChanIsAvail(SIP/${EXTENSION},s)
 same => n,GotoIf($["${AVAILSTATUS}"="5"]?unreachable)
 same => n,Goto(next)

 same => n(unreachable),NoOp(Extension ${EXTENSION} is unreachable)
 same => n,AGI(mysoulphone/desloguear_agente.agi,${EXTENSION})
; same => n,AGI(mysoulphone/SP_Register.agi,${EXTENSION})

 same => n(next),Set(EXT_COUNT=$[${EXT_COUNT} + 1])
 same => n,Goto(loop)

 same => n(end),NoOp(Completed processing all active extensions)
 same => n,Hangup()



;exten => s,1,NoOp(Checking extension status)
; same => n,Set(EXTENSION=2000)
; same => n(ret),ChanIsAvail(SIP/${EXTENSION},s)
; same => n,GotoIf($["${AVAILSTATUS}"="5"]?unreachable:next)
; same => n,Hangup()
; same => n(unreachable),NoOp(Extension ${EXTENSION} is unreachable)
; same => n,RemoveQueueMember(Q1,SIP/${EXTENSION})
; same => n,AGI(mysoulphone/desloguear_agente.agi,${EXTENSION})
; same => n(next),Set(EXTENSION=$[${EXTENSION}+1])
; same => n,Set(${EXTENSION})
; same => n,GotoIf($["${EXTENSION}"<="2010"]?ret:)
; same => n,Hangup()


[random_U2U]
exten => id1,1,Set(U2U="04C8407C33393537363135347C363031383335373230307C2B31333134343633393137367C44307C4449414E41204D415243454C41204C4147554E41204D4F52454E4F")
exten => id1,n,Return
exten => id2,1,Set(U2U="04C8407C39333133303732367C363031323433373437327C2B31333231333336383733357C44357C4341524C4F5320414E4452455320564152454C41204D4544494E41")
exten => id2,n,Return
exten => id3,1,Set(U2U="04C83B7C35313539333935347C363031373930303439377C2B31333131343637363737387C44307C414E412052495441204F5254495A204D454E444F5A41")
exten => id3,n,Return
exten => id4,1,Set(U2U="04C8407C39333133303732367C363031323433373437327C2B31333231333336383733357C44347C4341524C4F5320414E4452455320564152454C41204D4544494E41")
exten => id4,n,Return
exten => id5,1,Set(U2U="04C83E7C32303934313039337C31373831363437357C2B31333230323835303134367C44317C4D4152494120494E45532047415243494120524F4452494755455A")
exten => id5,n,Return
exten => id6,1,Set(U2U="04C83E7C35323331383036327C363031383232333336337C2B31333130333836363335347C44317C4D455243592050494C4152204449415A20474F4E5A414C455A")
exten => id6,n,Return

[vicidial-trunkinbound]
;include => Encuestas
;include => Interna-transfer

exten => 22XXX,1,Noop(transferencia Interna)
exten => 22XXX,n,Dial(SIP/${EXTEN:1},30)
exten => 22XXX,n,Hangup()

exten => 6966424X,1,Noop(Transferencias ${CALLERID(num)}  vicidial-trunkinbound)
exten => 6966424X,n,GoTo(Encuestas,${EXTEN:2},1)
exten => 6966424X,n,Hangup()

exten => _6966424X,1,Noop(Transferencias _ ${CALLERID(num)} vicidial-trunkinbound)
exten => _6966424X,n,GoTo(Encuestas,${EXTEN:2},1)
exten => _6966424X,n,Hangup()

exten => 66424X,1,Noop(Transferencias ${CALLERID(num)} vicidial-trunkinbound)
exten => 66424X,n,GoTo(Encuestas,${EXTEN:2},1)
exten => 66424X,n,Hangup()

exten => _66424X,1,Noop(Transferencias _ ${CALLERID(num)} vicidial-trunkinbound)
exten => _66424X,n,GoTo(Encuestas,${EXTEN:2},1)
exten => _66424X,n,Hangup()



exten => _X.,1,Noop(vicidial-trunkinbound)
exten => _X.,n,AGI(agi-DID_route.agi)
exten => _X.,n,Hangup()
; If you have DIDs that arrive with a plus sign at the beginning then uncomment
;exten => _+X.,1,AGI(agi-DID_route.agi)
;exten => _+X.,n,Hangup()
; If you have DIDs that arrive with a plus and 1 at the beginning that you want to filter out, then uncomment
;exten => _+1X.,1,Goto(trunkinbound,${EXTEN:2},1)

; FastAGI for VICIDIAL/astGUIclient call logging
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))

;[check_extension_status]
;exten => s,1,NoOp(Checking extension status)
; same => n,Set(EXTENSION=2000)
; same => n(ret),ChanIsAvail(SIP/${EXTENSION},s)
; same => n,GotoIf($["${AVAILSTATUS}"="5"]?unreachable:next)
; same => n,Hangup()
; same => n(unreachable),NoOp(Extension ${EXTENSION} is unreachable)
; same => n,AGI(mysoulphone/desloguear_agente.agi,${EXTENSION})
; same => n(next),Set(EXTENSION=$[${EXTENSION}+1])
; same => n,Set(${EXTENSION})
; same => n,GotoIf($["${EXTENSION}"<="2004"]?ret:)
; same => n,Hangup()

[Interna-transfer]
exten => 22XXX,1,Noop(transferencia Interna)
exten => 22XXX,n,Dial(SIP/${EXTEN:1},30)
exten => 22XXX,n,Hangup()

[loopback-no-log]
; This context is to accept calls that have already been logged in another context in Vicidial
; and has been sent through one of the loopbacks. This is why this context is missing the h extension.
; Do not put any extensions in this context unless you specifically understand what this means.

;exten => _91NXXNXXXXXX,1,Dial(${TRUNKX}/${EXTEN:1},,To)
;exten => _91NXXNXXXXXX,n,Hangup()

; special Canadian PRI callerIDname settings FOR USE IN LOOPBACK CONTEXT ONLY
;exten => _91NXXNXXXXXX,1,Set(CALLERID(name)="ACME Widgets")
;exten => _91NXXNXXXXXX,n,AGI(agi-CANADA_PRI_CIDname.agi)
;exten => _91NXXNXXXXXX,n,Dial(${TRUNKX}/${EXTEN:1},,To)
;exten => _91NXXNXXXXXX,n,Hangup()

exten => _999XX11112,1,Wait(2)
exten => _999XX11112,n,Answer()
exten => _999XX11112,n,Playback(ss-noservice)
exten => _999XX11112,n,Playback(vm-goodbye)
exten => _999XX11112,n,Hangup()

[default]
include => Interna-transfer
include => Encuestas
include => Inbound
include => voiceIA2
include => vicidial-auto
include => Voicebot
include => trunkinbound
include => voiceIAend
include => vicidial-auto-external
include => DESBORDE_180
;include => Encuestas


; Local agent alert extensions
exten => _8600XXX*.,1,AGI(agi-VDADfixCXFER.agi)
exten => _8600XXX*.,n,Hangup()
exten => _78600XXX*.,1,AGI(agi-VDADfixCXFER.agi)
exten => _78600XXX*.,n,Hangup()

; Local blind monitoring
exten => _08600XXX,1,Dial(${TRUNKblind}/6${EXTEN:1},55,To)
exten => _08600XXX,n,Hangup()


; playback of recorded prompts
exten => _851XXXXX,1,Answer()
exten => _851XXXXX,n,Playback(${EXTEN})
exten => _851XXXXX,n,Hangup()

; this is used for playing a message to an answering machine forwarded from AMD in VICIDIAL
exten => _6851XXXXX,1,Answer()
exten => _6851XXXXX,n,WaitForSilence(2000,1,90)
exten => _6851XXXXX,n,Playback(sip-silence)
exten => _6851XXXXX,n,Playback(${EXTEN:1})
exten => _6851XXXXX,n,Hangup()
exten => _7851XXXXX,1,WaitForSilence(2000,2) ; AMD got machine.  leave message after recording
exten => _7851XXXXX,n,Playback(${EXTEN:1})
exten => _7851XXXXX,n,AGI(VD_amd_post.agi,${EXTEN:1})
exten => _7851XXXXX,n,Hangup()


; FastAGI for VICIDIAL/astGUIclient call logging
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))

; Example phone extensions
; 100-350 phone extensions now auto-generated, so no need to uncommend them
; extensions for other SIP and IAX call center phones
;   cc100-cc150 SIP Phones
;exten => _1[0-5]X,1,Dial(sip/cc${EXTEN},20,to)
;exten => _1[0-5]X,n,Hangup()
;   cc300-cc350 IAX Phones
;exten => _3[0-5]X,1,Dial(IAX2/cc${EXTEN},20,to)
;exten => _3[0-5]X,n,Hangup()
; extensions if using a T1 channelbank
;exten => _19XX,1,Dial(Zap/${EXTEN:2},30,o)
;exten => _19XX,n,Hangup()
; Extension 4001 rings Zap phone (this example for FXS on Zap port 1)
;exten => 4001,1,Dial(Zap/1,30,o)       ; ring Zap device 1
;exten => 4001,n,Voicemail(u4001)         ; Send to voicemail...
;exten => 4001,n,Hangup()


; # timeout invalid rules
exten => #,1,Playback(invalid)              ; "Thanks for trying the demo"
exten => #,2,Hangup()                     ; Hang them up.
exten => t,1,Goto(#,1)                  ; If they take too long, give up
exten => t,n,Hangup()
exten => i,1,Playback(invalid)          ; "That's not valid, try again"
exten => i,n,Hangup()


; Extensions for performance testing
;exten => _91999NXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _91999NXXXXXX,n,Dial(${TRUNKloop}/${EXTEN:2},,tTo)
;exten => _91999NXXXXXX,n,Hangup()
;exten => 999999999999,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => 999999999999,n,Dial(${TRUNKloop}/${EXTEN:1},,tTo)
;exten => 999999999999,n,Hangup()

; This is a loopback dialaround to allow for hearing of ringing for 3way calls
exten => _881NXXNXXXXXX,1,Answer()
exten => _881NXXNXXXXXX,n,Dial(${TRUNKloop}/9${EXTEN:2},,To)
exten => _881NXXNXXXXXX,n,Hangup()

; Vtiger fax and email log extensions
exten => _9118XXXXXXXX,1,Dial(${TRUNKblind}/9998818112,55,to)
exten => _9118XXXXXXXX,n,Hangup()
exten => _9119XXXXXXXX,1,Dial(${TRUNKblind}/9998819112,55,to)
exten => _9119XXXXXXXX,n,Hangup()


; CARRIER DIALING EXTENSIONS, USE THE ADMIN INTERFACE TO PROGRAM THESE
; dial an 800 outbound number
;exten => _91800NXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _91800NXXXXXX,n,Dial(${TRUNK}/${EXTEN:1},,To)
;exten => _91800NXXXXXX,n,Hangup()
;exten => _91888NXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _91888NXXXXXX,n,Dial(${TRUNK}/${EXTEN:1},,To)
;exten => _91888NXXXXXX,n,Hangup()
;exten => _91877NXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _91877NXXXXXX,n,Dial(${TRUNK}/${EXTEN:1},,To)
;exten => _91877NXXXXXX,n,Hangup()
;exten => _91866NXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _91866NXXXXXX,n,Dial(${TRUNK}/${EXTEN:1},,To)
;exten => _91866NXXXXXX,n,Hangup()
;exten => _91855NXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _91855NXXXXXX,n,Dial(${TRUNK}/${EXTEN:1},,To)
;exten => _91855NXXXXXX,n,Hangup()

; dial a long distance outbound number
; This 'o' Dial flag is VERY important for VICIDIAL on outbound calls
;exten => _91NXXNXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _91NXXNXXXXXX,n,Dial(${TRUNKX}/${EXTEN:1},,To)
;exten => _91NXXNXXXXXX,n,Hangup()

; dial a local outbound number (modified because of only LD T1)
;exten => _9NXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _9NXXXXXX,n,Dial(${TRUNK}/1727${EXTEN:1},,To)
;exten => _9NXXXXXX,n,Hangup()

; dial a local 727 outbound number with area code
;exten => _9727NXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _9727NXXXXXX,n,Dial(${TRUNK}/1${EXTEN:1},,To)
;exten => _9727NXXXXXX,n,Hangup()

; dial a long distance outbound number to the UK
; This 'o' Dial flag is VERY important for VICIDIAL on outbound calls,
;exten => _901144XXXXXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _901144XXXXXXXXXX,n,Dial(${TRUNKX}/${EXTEN:1},55,To)
;exten => _901144XXXXXXXXXX,n,Hangup()

; dial a long distance outbound number to Australia
; This 'o' Dial flag is VERY important for VICIDIAL on outbound calls,
;exten => _901161XXXXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => _901161XXXXXXXXX,n,Dial(${TRUNKX}/${EXTEN:1},,To)
;exten => _901161XXXXXXXXX,n,Hangup()

; dial a long distance outbound number through BINFONE
; exten => _91NXXNXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91NXXNXXXXXX,n,Dial(${TRUNKIAX}/${EXTEN:1},55,To)
; exten => _91NXXNXXXXXX,n,Hangup()
; dial a long distance outbound number through a SIP provider
; exten => _91NXXNXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91NXXNXXXXXX,n,Dial(sip/${EXTEN:1}@SIPtrunk,55,o)
; exten => _91NXXNXXXXXX,n,Hangup()
; special extensions for North America to catch invalid phone numbers
; exten => _91XXX[0-1]XXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91XXX[0-1]XXXXXX,n,Dial(${TRUNKloop}/8889990011112,,to)
; exten => _91XXX[0-1]XXXXXX,n,Hangup()
; exten => _91[0-1]XXXXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91[0-1]XXXXXXXXX,n,Dial(${TRUNKloop}/8889990011112,,to)
; exten => _91[0-1]XXXXXXXXX,n,Hangup()
; exten => _91XXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91XXXXXX,n,Dial(${TRUNKloop}/8889990011112,,to)
; exten => _91XXXXXX,n,Hangup()
; exten => _91XXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91XXXXXXX,n,Dial(${TRUNKloop}/8889990011112,,to)
; exten => _91XXXXXXX,n,Hangup()
; exten => _91XXXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91XXXXXXXX,n,Dial(${TRUNKloop}/8889990011112,,to)
; exten => _91XXXXXXXX,n,Hangup()
; exten => _91XXXXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91XXXXXXXXX,n,Dial(${TRUNKloop}/8889990011112,,to)
; exten => _91XXXXXXXXX,n,Hangup()
; exten => _91XXXXXXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91XXXXXXXXXXX,n,Dial(${TRUNKloop}/8889990011112,,to)
; exten => _91XXXXXXXXXXX,n,Hangup()
; exten => _91XXXXXXXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91XXXXXXXXXXXX,n,Dial(${TRUNKloop}/8889990011112,,to)
; exten => _91XXXXXXXXXXXX,n,Hangup()
; exten => _91XXXXXXXXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91XXXXXXXXXXXXX,n,Dial(${TRUNKloop}/8889990011112,,to)
; exten => _91XXXXXXXXXXXXX,n,Hangup()
; block calls to 555 numbers
; exten => _91NXX555NXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91NXX555NXXX,n,Dial(${TRUNKloop}/8889990011112,,to)
; exten => _91NXX555NXXX,n,Hangup()
; dial a USA long distance outbound number through the loopback-no-log context
; exten => _91NXXNXXXXXX,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => _91NXXNXXXXXX,n,Dial(${TRUNKloop}/888${EXTEN:2},55,o)
; exten => _91NXXNXXXXXX,n,Hangup()
;exten => _888NXXNXXXXXX,1,Goto(loopback-no-log,91${EXTEN:3},1)
;exten => _888NXXNXXXXXX,n,Hangup()

exten => 8889990011112,1,Goto(loopback-no-log,9990011112,1)
exten => 8889990011112,n,Hangup()


; Inbound call from BINFONE
; exten => 1112223333,1,AGI(agi://127.0.0.1:4577/call_log)
; exten => 1112223333,n,Dial(sip/gs102,55,o)
; exten => 1112223333,n,Hangup()

; Extension 7275551212 - Inbound local number from PRI with 10 digit delivery
;exten => 7275551212,1,Ringing()
;exten => 7275551212,n,Wait(1)
;exten => 7275551212,n,AGI(agi://127.0.0.1:4577/call_log--fullCID--${EXTEN}-----${CALLERID(all)}-----${CALLERID(num)}-----${CALLERID(name)})
;exten => 7275551212,n,Answer()
;exten => 7275551212,n,Dial(sip/spa2000&sip/spa2001,30,To)
;exten => 7275551212,n,Voicemail(u2000)
;exten => 7275551212,n,Hangup()

; parameters for call_inbound.agi (7 fields separated by five dashes "-----"):
; 1. the extension of the phone to ring as defined in the asterisk.phones table
; 2. the phone number that was called, for the live_inbound/_log entry
; 3. a text description of the number that was called in
; 4-7. optional fields, they are also passed as fields in the GUI to web browser
; This is not part of VICIDIAL, it is for astGUIclient agent use only

; Extension 3429 - Inbound 800 number (1-800-555-3429) example of RBS T1
;    with 10 digit ANI and 4 digit DNIS star separated
;exten => _**3429,1,Ringing
;exten => _**3429,n,AGI(agi://127.0.0.1:4577/call_log)
;exten => _**3429,n,AGI(call_inbound.agi,spa2000-----8005553429-----Inbound 800-----x-----y-----z-----w)
;exten => _**3429,n,Answer()
;exten => _**3429,n,Dial(sip/spa2000&sip/spa2001,30,to)
;exten => _**3429,n,Voicemail(u2000)
;exten => _**3429,n,Hangup()
; Extension 3429 - with ANI [callerID]
;exten => _*NXXNXXXXXX*3429,1,Ringing
;exten => _*NXXNXXXXXX*3429,n,AGI(agi://127.0.0.1:4577/call_log)
;exten => _*NXXNXXXXXX*3429,n,AGI(call_inbound.agi,spa2000-----8005553429-----Inbound 800-----x-----y-----z-----w)
;exten => _*NXXNXXXXXX*3429,n,Answer()
;exten => _*NXXNXXXXXX*3429,n,Dial(sip/spa2000&sip/spa2001,30,to)
;exten => _*NXXNXXXXXX*3429,n,Voicemail(u2000)
;exten => _*NXXNXXXXXX*3429,n,Hangup()


; parameters for agi-VDAD_ALL_inbound.agi (upto 12 fields separated by five dashes "-----"):
; Below are the parameters needed for the script to be run properly
; 1. the method of call handling for the script:
;       - CID -         CID received, add record with phone number
;       - CIDLOOKUP -   Lookup CID to find record in whole system
;       - CIDLOOKUPRL - Restrict lookup to one list
;       - CIDLOOKUPRC - Restrict lookup to one campaign's lists
;     - CLOSER -      Closer calls from VICIDIAL fronters
;       - ANI -         ANI received, add record with phone number (based on RBS T1s)
;       - ANILOOKUP -   Lookup ANI to find record in whole system
;       - ANILOOKUPRL - Restrict lookup to one list
;       - ANILOOKUPRC - Restrict lookup to one campaign's lists
;       - VID -         Add record with Vendor Lead Code received as argument 12
;       - VIDLOOKUP -   Lookup Vendor Lead Code received as argument 12 to find record in whole system
;       - VIDLOOKUPRL - Restrict lookup to one list (argument 12)
;       - VIDLOOKUPRC - Restrict lookup to one campaign's lists (argument 12)
;       - VIDPROMPT -   Prompt Vendor Lead Code to User with IVR to add record with Vendor Lead Code
;       - VIDPROMPTLOOKUP -     Prompt Vendor Lead Code to User with IVR to find record in whole system
;       - VIDPROMPTLOOKUPRL -   Restrict lookup to one list
;       - VIDPROMPTLOOKUPRC -   Restrict lookup to one campaign's lists
;       - 3DIGITID -    Enter 3 digit code to go to agent
;       - 4DIGITID -    Enter 4 digit code to go to agent
;       - XDIGITID -    Enter X digit code to go to agent(variable, i.e. 9DIGITID, 12DIGITID, etc...)
; 2. the method of searching for an available agent:
;       - LO - Load Balance Overflow only (priority to home server)
;       - LB - <default> Load Balance total system
;       - SO - Home server only
; 3. the full name of the IN GROUP to be used in vicidial for the inbound call
; 4. the phone number that was called, for the log entry
; 5. the callerID or lead_id of the person that called(usually overridden)
; 6. the park extension audio file name if used
; 7. the status of the call initially(usually not used)
; 8. the list_id to insert the new lead under if it is new (and CID/ANI available)
; 9. the phone dialing code to insert with the new lead if new (and CID/ANI available)
; 10. the campaign_id to search within lists if CIDLOOKUPRC
; 11. the user to queue the call to for AGENTDIRECT in-group calls
; 12. vendor_lead_code if external mechanism like custom IVR is used to prompt user for ID
;
; inbound VICIDIAL call with CID delivery through T1 PRI
;exten => 1234,1,Answer()                  ; Answer the line
;exten => 1234,n,AGI(agi-VDAD_ALL_inbound.agi,CID-----LB-----CL_GALLERIA-----7274515134-----Closer-----park----------999-----1)
;exten => 1234,n,Hangup()

; inbound VICIDIAL transfer calls [can arrive through PRI T1 crossover, IAX or SIP channel]
exten => _90009.,1,Answer()                  ; Answer the line
exten => _90009.,n,Dial(${TRUNKloop}/9${EXTEN},,to)
exten => _90009.,n,Hangup()
exten => _990009.,1,Answer()                  ; Answer the line, Sometimes needs to be removed
exten => _990009.,n,AGI(agi-VDAD_ALL_inbound.agi,CLOSER-----LB-----CL_TESTCAMP-----7275551212-----Closer-----park----------999-----1)
exten => _990009.,n,Hangup()
; DID forwarded calls
exten => _99909*.,1,Answer()
exten => _99909*.,n,AGI(agi-VDAD_ALL_inbound.agi)
exten => _99909*.,n,Hangup()


; barge monitoring extension
exten => 8159,1,ZapBarge()
exten => 8159,n,Hangup()

; ZapBarge direct channel extensions
exten => _86120XX,1,ZapBarge(${EXTEN:5})
exten => _86120XX,n,Hangup()

; MeetMe Adjustment Extensions
exten => _X48600XXX,1,MeetMeAdmin(${EXTEN:2},T,${EXTEN:0:1})
exten => _X48600XXX,2,Hangup()

exten => _X38600XXX,1,MeetMeAdmin(${EXTEN:2},t,${EXTEN:0:1})
exten => _X38600XXX,2,Hangup()

exten => _X28600XXX,1,MeetMeAdmin(${EXTEN:2},m,${EXTEN:0:1})
exten => _X28600XXX,2,Hangup()

exten => _X18600XXX,1,MeetMeAdmin(${EXTEN:2},M,${EXTEN:0:1})
exten => _X18600XXX,2,Hangup()

exten => _55558600XXX,1,MeetMeAdmin(${EXTEN:4},K)
exten => _55558600XXX,2,Hangup()

; immediate hangup extension
exten => 8300,1,Hangup()

; astGUIclient conferences
exten => _86000[0-4]X,1,Meetme(${EXTEN},q)
exten => _86000[0-4]X,n,Hangup()

; VICIDIAL conferences
exten => _86000[5-9]X,1,Meetme(${EXTEN},F)
exten => _86000[5-9]X,n,Hangup()
exten => _8600[1-2]XX,1,Meetme(${EXTEN},F)
exten => _8600[1-2]XX,n,Hangup()

; quiet entry and leaving conferences for VICIDIAL (inbound announce, SendDTMF and ring-agent)
exten => _78600XXX,1,Meetme(${EXTEN:1},Fq)
exten => _78600XXX,n,Hangup()

; quiet monitor-only extensions for meetme rooms (for room managers)
exten => _68600XXX,1,Meetme(${EXTEN:1},Fmq)
exten => _68600XXX,n,Hangup()

; Asterisk 1.8 workaround
exten => _58600XXX,1,Meetme(${EXTEN:1},Fmq)
exten => _58600XXX,n,Hangup()

; quiet monitor-only entry and leaving conferences for VICIDIAL (recording)
exten => _558600XXX,1,Meetme(${EXTEN:2},Fmq)
exten => _558600XXX,n,Hangup()

; voicelab exten
exten => _86009XX,1,Meetme(${EXTEN},Fmq)
; voicelab exten moderator
exten => _986009XX,1,Meetme(${EXTEN:1})


; park channel for client GUI parking, hangup after 30 minutes
;    create a GSM formatted audio file named "park.gsm" that is 30 minutes long
;    and put it in /var/lib/asterisk/sounds
exten => 8301,1,Answer()
exten => 8301,n,AGI(park_CID.agi)
exten => 8301,n,Playback(park)
exten => 8301,n,Hangup()
exten => 8303,1,Answer()
exten => 8303,n,AGI(park_CID.agi)
exten => 8303,n,Playback(conf)
exten => 8303,n,Hangup()

; park channel for client GUI conferencing, hangup after 30 minutes
;    create a GSM formatted audio file named "conf.gsm" that is 30 minutes long
;    and put it in /var/lib/asterisk/sounds
exten => 8302,1,Answer()
exten => 8302,n,Playback(conf)
exten => 8302,n,Hangup()

exten => 8304,1,Answer()
exten => 8304,n,Playback(ding)
exten => 8304,n,Hangup()

; default audio for safe harbor 2-second-after-hello message then hangup
;    create a GSM formatted audio file complies with safe harbor rules
;    and put it in /var/lib/asterisk/sounds then change filename below
exten => 8307,1,Answer()
exten => 8307,n,Playback(vm-goodbye)
exten => 8307,n,Hangup()

; this is used for playing a message to an answering machine forwarded from AMD in VICIDIAL
exten => 8320,1,AGI(VD_amd.agi,${EXTEN}-----YES)
exten => 8320,n,Hangup()
exten => _8320*.,1,AGI(VD_amd.agi,${EXTEN}-----YES)
exten => _8320*.,n,Hangup()

; these are used for the ring_all function in VICIDIAL
exten => _8331*.,1,Playback(sip-silence)
exten => _8331*.,n,AGI(agi-VDAD_RINGALL.agi,${EXTEN})
exten => _8331*.,n,AGI(agi-VDAD_RINGALL.agi,${EXTEN})
exten => _8331*.,n,AGI(agi-VDAD_RINGALL.agi,${EXTEN})
exten => _8331*.,n,Hangup()


; use for selective CallerID hangup by area code(hard-coded)
exten => 8352,1,AGI(agi-VDADselective_CID_hangup.agi,${EXTEN})
exten => 8352,n,Playback(safe_harbor)
exten => 8352,n,Hangup()

; this is used for sending DTMF signals within conference calls, the client app
;    sends the digits to be played in the callerID field
;    sound files must be placed in /var/lib/asterisk/sounds
exten => 8500998,1,Answer()
exten => 8500998,n,Playback(silence)
exten => 8500998,n,AGI(agi-dtmf.agi)
exten => 8500998,n,Hangup()

; multi-remote-monitor entry extensions
exten => 8162,1,Dial(${TRUNKblind}/34567890123456789,55,to)
exten => 8162,n,Hangup()

exten => 34567890123456789,1,Answer()
exten => 34567890123456789,n,Goto(monitor,s,1)
exten => 34567890123456789,n,Hangup()

;#### VDAD STANDARD TRANSFER ENTRIES ####
; Below are the parameters needed for the agi-VDAD_ALL_outbound.agi script to be run properly
; 1. the method of call handling for the script:
;       - NORMAL -              <default> Standard outbound routing to agent
;       - TEST -                For performance testing only
;       - BROADCAST -   For no-agent broadcast dialing
;       - SURVEY -              For survery question then on to agent
;       - REMINDER -    Reminder campaign
;       - REMINDX -             Reminder with transfer to agent
; 2. the method of searching for an available agent:
;       - LB - <default> Load Balance total system
;       - LO - Load Balance Overflow only (priority to home server)
;       - SO - Home server only
; 3. the sound file to play when doing a SURVEY, REMINDER, REMINDX campaign
; 4. the acceptible dtmf digits for a SURVEY
; 5. the out-opt digit for a SURVEY (must be in the digit map)
; 6. the sound file to play for a SURVEY when transfering to an agent
; 7. the sound file to play for a SURVEY when DNCing the call
; 8. OPTIN or OPTOUT: if OPTIN call is only sent to agent with button press
;     if OPTOUT call is sent to agent if no button press at all
; 9. the status that is use for a SURVEY when someone opts out
;     if the status is DNC it will also add them to the internal dnc table

; Local channel resolution fix for Asterisk 13
exten => _1383XX,1,AGI(agi-VDAD_local_optimize.agi,${CONNECTEDLINE(name)})
exten => _1383XX,n,Wait(2)
exten => _1383XX,n,Hangup()

exten => _138331*.,1,AGI(agi-VDAD_local_optimize.agi,${CONNECTEDLINE(name)})
exten => _138331*.,n,Wait(2)
exten => _138331*.,n,Hangup()

; VICIDIAL_auto_dialer transfer script for no-agent campaigns:
exten => 8364,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8364,n,AGI(agi-VDAD_ALL_outbound.agi,NORMAL-----LB-----${CONNECTEDLINE(name)})
exten => 8364,n,Hangup()

; VICIDIAL_auto_dialer transfer script:
exten => 8365,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8365,n,AGI(agi-VDAD_ALL_outbound.agi,NORMAL-----SO-----${CONNECTEDLINE(name)})
exten => 8365,n,Hangup()

; VICIDIAL_auto_dialer transfer script SURVEY at beginning:
exten => 8366,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8366,n,AMD(1900,1900,1000,5000,120,50,4,256)
;exten => 8366,n,AMD(2100,2100,1200,5100,120,50,4,256)
;exten => 8366,n,AMD(1000,1500,500,5000,300,500,2,3)
;exten => 8366,n,AGI(VD_amd.agi,${EXTEN})
exten => 8366,n,Goto(Voicebot,83971,1)
;exten => 8366,n,AGI(agi-VDAD_ALL_outbound.agi,SURVEYCAMP-----LB-----${CONNECTEDLINE(name)})
exten => 8366,n,Hangup()

;Cuando termina llamada
exten => end_call,1,NoOp(End call  ${id})
;same => n,AGI(vbCallFlow.agi,4,${UniqueID},${STEP},333)
same => n,StopMixMonitor()
same => n,AGI(voicebot_montechelo/end_call.agi,${HOST},${id})
same => n,Hangup()

exten => 8466,1,AGI(agi://127.0.0.1:4577/call_log)
;exten => 8466,n,AMD(1950,1950,1050,5050,120,50,6,256)
;exten => 8466,n,AMD(1900,1900,1000,5000,120,50,4,256)
exten => 8466,n,AMD(2100,2100,1200,5100,120,50,4,256)
exten => 8466,n,AGI(VD_amd.agi,${EXTEN})
exten => 8466,n,Goto(Voicebot,83971,1)
;exten => 8466,n,AGI(agi-VDAD_ALL_outbound.agi,SURVEYCAMP-----LB-----${CONNECTEDLINE(name)})
exten => 8466,n,Hangup()



; VICIDIAL_auto_dialer transfer script Load Balance Overflow:
exten => 8367,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8367,n,AGI(agi-VDAD_ALL_outbound.agi,NORMAL-----LO-----${CONNECTEDLINE(name)})
exten => 8367,n,Hangup()

; VICIDIAL_auto_dialer transfer script Load Balanced:
exten => 8368,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8368,n,AGI(agi-VDAD_ALL_outbound.agi,NORMAL-----LB-----${CONNECTEDLINE(name)})
exten => 8368,n,Hangup()

; VICIDIAL_auto_dialer transfer script AMD with Load Balanced:
exten => 8369,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8369,n,Playback(sip-silence)
exten => 8369,n,AMD(2000,2000,1000,5000,120,50,4,256)
exten => 8369,n,AGI(VD_amd.agi,${EXTEN})
exten => 8369,n,AGI(agi-VDAD_ALL_outbound.agi,NORMAL-----LB-----${CONNECTEDLINE(name)})
exten => 8369,n,Hangup()

; VICIDIAL auto-dial reminder script
exten => 8372,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8372,n,AGI(agi-VDADautoREMINDER.agi,${EXTEN})
exten => 8372,n,Hangup()

; VICIDIAL SURVEY transfer script AMD with Load Balanced:
exten => 8373,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8373,n,Playback(sip-silence)
exten => 8373,n,AMD(2000,2000,1000,5000,120,50,4,256)
exten => 8373,n,AGI(VD_amd.agi,${EXTEN})
exten => 8373,n,AGI(agi-VDAD_ALL_outbound.agi,SURVEYCAMP-----LB-----${CONNECTEDLINE(name)})
exten => 8373,n,Hangup()

; VICIDIAL SURVEY transfer script with Cepstral names:
exten => 8374,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8374,n,AGI(agi-VDAD_ALL_outbound.agi,SURVEYCAMPCEP-----LB-----${CONNECTEDLINE(name)})
exten => 8374,n,Hangup()

; VICIDIAL SURVEY transfer script AMD with Cepstral variables:
exten => 8375,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8375,n,Playback(sip-silence)
exten => 8375,n,AMD(2000,2000,1000,5000,120,50,4,256)
exten => 8375,n,AGI(VD_amd.agi,${EXTEN})
exten => 8375,n,AGI(agi-VDAD_ALL_outbound.agi,SURVEYCAMPCEP-----LB-----${CONNECTEDLINE(name)})
exten => 8375,n,Hangup()

; BETA VICIDIAL_auto_dialer transfer script Load Balanced:
exten => 8377,1,AGI(agi://127.0.0.1:4577/call_log)
exten => 8377,n,Set(LRct=1)
exten => 8377,n,While($[${LRct} < 100])
exten => 8377,n,AGI(agi-VDAD_ALL_outboundBETA.agi,NORMAL-----LB-----${CONNECTEDLINE(name)})
exten => 8377,n,Set(LRct=$[${LRct} + 1])
exten => 8377,n,EndWhile()
exten => 8377,n,AGI(agi-VDAD_ALL_outboundBETA.agi,NORMAL-----LB-----${CONNECTEDLINE(name)})
exten => 8377,n,Hangup()


; PERFORMANCE TESTING
exten => _999XXXXXX1,1,Answer()
exten => _999XXXXXX1,n,Wait(2)
exten => _999XXXXXX1,n,Playback(vicidial-welcome)
exten => _999XXXXXX1,n,Hangup()

exten => _999XX11112,1,Wait(2)
exten => _999XX11112,n,Answer()
exten => _999XX11112,n,Playback(ss-noservice)
exten => _999XX11112,n,Playback(vm-goodbye)
exten => _999XX11112,n,Hangup()

exten => _999XX18112,1,Wait(2)
exten => _999XX18112,n,Answer()
exten => _999XX18112,n,Playback(vtiger-fax)
exten => _999XX18112,n,Playback(vtiger-fax)
exten => _999XX18112,n,Hangup()

exten => _999XX19112,1,Wait(2)
exten => _999XX19112,n,Answer()
exten => _999XX19112,n,Playback(vtiger-email)
exten => _999XX19112,n,Playback(vtiger-email)
exten => _999XX19112,n,Hangup()

exten => _999XXXX112,1,Wait(5)
exten => _999XXXX112,n,Answer()
exten => _999XXXX112,n,Playback(demo-instruct)
exten => _999XXXX112,n,Playback(demo-instruct)
exten => _999XXXX112,n,Hangup()

exten => _999XXXXXX2,1,Wait(8)
exten => _999XXXXXX2,n,Answer()
exten => _999XXXXXX2,n,Playback(demo-instruct)
exten => _999XXXXXX2,n,Hangup()

exten => _999XXXXXX3,1,Set(PRI_CAUSE=1)
exten => _999XXXXXX3,n,Hangup()

exten => _999XXXXXX4,1,Set(PRI_CAUSE=27)
exten => _999XXXXXX4,n,Hangup()

exten => _999XXXXXX5,1,Ringing
exten => _999XXXXXX5,n,Wait(120)
exten => _999XXXXXX5,n,Hangup()

exten => _999XXXXXX6,1,Wait(10)
exten => _999XXXXXX6,n,Answer()
exten => _999XXXXXX6,n,Playback(demo-instruct)
exten => _999XXXXXX6,n,Hangup()

exten => _999XXXXXX7,1,Wait(12)
exten => _999XXXXXX7,n,Answer()
exten => _999XXXXXX7,n,Playback(demo-enterkeywords)
exten => _999XXXXXX7,n,Hangup()

exten => _999XXXXXX8,1,Set(PRI_CAUSE=17)
exten => _999XXXXXX8,n,Hangup()

exten => _999XXXXXX9,1,Wait(6)
exten => _999XXXXXX9,n,Answer()
exten => _999XXXXXX9,n,Playback(demo-abouttotry)
exten => _999XXXXXX9,n,Hangup()

exten => _999XXXXXX0,1,Wait(5)
exten => _999XXXXXX0,n,Answer()
exten => _999XXXXXX0,n,Playback(vm-goodbye)
exten => _999XXXXXX0,n,Hangup()

;exten => 99999999999,1,Answer()
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Playback(conf)
;exten => 99999999999,n,Hangup()


[monitor]
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))
exten => s,1,Set(TIMEOUT(digit)=10)
exten => s,n,Set(TIMEOUT(response)=10)
exten => s,n,Set(MEETME_EXIT_CONTEXT=monitor_exit)
exten => s,n,Background(vm-extension) ; need audio prompt.
exten => s,n,WaitExten(10)
exten => s,n,Hangup()

exten => i,1,Goto(monitor_exit,s,1)
exten => i,n,Hangup()
exten => #,1,Goto(monitor_exit,s,1)
exten => #,n,Hangup()
exten => t,1,Goto(monitor_exit,s,1)
exten => t,n,Hangup()

exten => _8[0-2]XX,1,Meetme(8600${EXTEN:1},mqX) ; Listen
exten => _8[0-2]XX,n,Hangup()
exten => _99[0-2]XX,1,Meetme(8600${EXTEN:2},X)  ; Barge
exten => _99[0-2]XX,n,Hangup()

[monitor_exit]
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))
exten => _X,1,Goto(monitor,s,1)
exten => _X,n,Hangup()

exten => i,1,Goto(monitor,s,1)
exten => i,n,Hangup()
exten => #,1,Goto(monitor,s,1)
exten => #,n,Hangup()
exten => t,1,Goto(monitor,s,1)
exten => t,n,Hangup()

[Voicebot]

exten => 83971,1,NoOp("Llamada Iniciada" y ${AMM_lead_id})
same => n,NoOp(Estado: ${CALLERID(name)} Causa: ${CALLERID(num)} Cliente ${CALLERID(all)})
same => n,Set(CHANNEL(hangup_handler_push)=end_call,1)
same => n,AGI(voicebot_montechelo/init.agi)
;same => n,Set(HOST=https://voicebot.groupcos.com)
;same => n,Set(HOST=http://172.10.7.20:8001)
;same => n,Set(HOST=http://172.17.9.60)
same => n,Set(HOST=http://172.17.9.51:30788)

same => n,Set(STEP=${step})
same => n,Set(Paso=0)
same => n,AGI(voicebot_montechelo/mark_start_call.agi,${HOST},${id})
same => n,MixMonitor(${record_path}/${id}.wav)
same => n,Goto(next,1)

;Inicia la iteración
exten => next,1,Playback(${next})
;exten => next,1,Background(${next}&/var/lib/asterisk/sounds/AUDIO1)
;same => n,Playback(/var/lib/asterisk/sounds/AUDIO1)
same => n,Noop(${next})
same => n,Record(/tmp/bot-test/${id}.wav,3,4,q)
same => n,Verbose("Termina grabación")
same => n,Set(ID=${id})
same => n,Set(RESPONSE=/tmp/${id}.wav)

;valida respuesta
same => n,Verbose("Send check response")
same => n,Noop(${STEP} Validar ${RESPONSE})
same => n,AGI(voicebot_montechelo/request_response.agi,${HOST},${ID},${RESPONSE},${STEP})
same => n,Verbose("Get check response")

same => n,Set(STEP=${step})
same => n,Noop(${STEP} Validar ${status})
same => n,GotoIf($["${status}" = "next"]?next,1)
same => n,GotoIf($["${status}" = "finished"]?finished,1)
same => n,GotoIf($["${status}" = "transfer"]?transfer,1)
same => n,Hangup()

;finaliza la llamada
exten => finished,1,Playback(${next})
same => n,Hangup()

;Transferencia
exten => transfer,1,Playback(${next})
same => n,Verbose( ${resource} )
;same => n,Dial(${resource},60)
same => n,Noop(Llamada Transferida ${CALLERID(num)} ID LLAMADA: ${id})
;same => n,Dial(SIP/proxy-site2/940224)
same => n,set(CALLERID(name)=VB${ID})
same => n,set(CALLERID(num)=${Phone})
same => n,Noop(enviando numero ${CALLERID(name)} Tel ${auto_call_id} o telefono ${call_callerid})
;same => n,AGI(vbCallFlow.agi,4,${UniqueID},${STEP},334)
same => n,Dial(${resource})
same => n,Hangup()

;Cuando termina llamada
exten => end_call,1,NoOp(End call  ${id})
same => n,StopMixMonitor()
same => n,AGI(voicebot_montechelo/end_call.agi,${HOST},${id})
same => n,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))
same => n,Goto(finished)

[voiceIN]

exten => 75082,1,NoOp("UUI" y ${UUI})
exten => 75082,n,playback(Audio_inicial)
exten => 75082,n,set(CallID=${UniqueID})
exten => 75082,n,set(Campaing=1)
exten => 75082,n,mixmonitor(${CallID}_${Campaing}.wav,)
exten => 75082,n,Return
exten => 75082,n,

[voiceIA]
exten => 75093,1,NoOp(Voicebot IA ${CALLERID(num)})
exten => 75093,n,Set(CHANNEL(hangup_handler_push)=voiceIAend,75094,1)
exten => 75093,n,AGI(voiceIN/Consultation_call.agi,${UNIQUEID})
exten => 75093,n,MixMonitor(/tmp/voiceIN/Records/${Vlead_id}_${Vcampaign_id}.wav)
exten => 75093,n,AGI(voiceIN/Call_Request.agi,${CALLERID(num)},${Vlead_id},5)
exten => 75093,n,AGI(voiceIN/Welcome_call.agi,${id},${Vlead_id})
exten => 75093,n,playback(/tmp/voiceIN/${Vlead_id})
;exten => 75093,n,BackgroundDetect(/tmp/voiceIN/${Vlead_id},1500)
exten => 75093,n,Set(int=0)
exten => 75093,n(repeat),Record(/tmp/voiceIN/Request/${Vlead_id}${int}.wav,3,15,t)
;exten => 75093,n,Set(int=$[${int}+1])
;exten => 75093,n,NoOp(${int})
;exten => 75093,n,playback(Hold_1)
exten => 75093,n,playback(/tmp/voiceIN/Stand_by_${Vlead_id})
exten => 75093,n,AGI(voiceIN/Call_response_1.agi,${Vlead_id},${id},${int})
exten => 75093,n,Set(int=$[${int}+1])
exten => 75093,n,playback(/tmp/voiceIN/Response/${Vlead_id})
;exten => 75093,n,BackgroundDetect(/tmp/voiceIN/Response/${Vlead_id},[150,[1500,[2000,[1400]]]])
;exten => 75093,n,BackgroundDetect(/tmp/voiceIN/Response/${Vlead_id})
;exten => 75093,n,Set(int=$[${int}+1])
exten => 75093,n,goto(repeat)
exten => 75093,n,hangup()

exten => 75095,1,NoOp(Voicebot IA ${CALLERID(num)})
exten => 75095,n,Set(CHANNEL(hangup_handler_push)=voiceIAend,75095,1)
exten => 75095,n,AGI(voiceIN/Consultation_call.agi,${UNIQUEID})
exten => 75095,n,MixMonitor(/tmp/voiceIN/Records/${Vlead_id}_${Vcampaign_id}.wav)
exten => 75095,n,AGI(voiceIN/Call_Request.agi,${CALLERID(num)},${Vlead_id},1)
exten => 75095,n,AGI(voiceIN/Welcome_call.agi,${id},${Vlead_id})
exten => 75095,n,playback(/tmp/voiceIN/${Vlead_id})
exten => 75095,n,Set(int=0)
exten => 75095,n(repeat),Record(/tmp/voiceIN/Request/${Vlead_id}${int}.wav,3,15,t)
exten => 75095,n,playback(/tmp/voiceIN/Stand_by_${Vlead_id})
exten => 75095,n,AGI(voiceIN/Call_response_1.agi,${Vlead_id},${id},${int})
exten => 75095,n,Set(int=$[${int}+1])
exten => 75095,n,playback(/tmp/voiceIN/Response/${Vlead_id})
exten => 75095,n,goto(repeat)
exten => 75095,n,hangup()

[voiceIA2]
exten => 75093,1,NoOp(Voicebot IAAA ${CALLERID(num)})
exten => 75093,n,Dial(SIP/AST8203/6014864356,30,,Ttor)
exten => 75093,n,hangup()

exten => 75092,1,NoOp(Voicebot IAAA ${CALLERID(num)})
exten => 75092,n,Dial(SIP/AST8203/6014864357,30,,Ttor)
exten => 75092,n,hangup()

exten => 75095,1,NoOp(Voicebot DEMOS Y MARIO ${CALLERID(num)})
exten => 75095,n,Set(callnum=${CALLERID(num)})
exten => 75095,n,GotoIf($["${callnum}" = "3102290796"]?Ope:callia)
exten => 75095,n,GotoIf($["${callnum}" = "3214034846"]?Ope:callia)
exten => 75095,n(callia),Dial(SIP/AST8203/6017441427,30,,Ttor)
exten => 75095,n,hangup()
exten => 75095,n(Ope),Set(U2U=e29692437c31313131313131313131317c363031323938353336357c2b31333139323035313030337c44317c4a4f524745464f4e4341)
exten => 75095,n,Set(__U2U=${U2U})
exten => 75095,n,Set(CAMP_ID=17)
exten => 75095,n,Set(SPEXTEN=${EXTEN})
exten => 75095,n,GoSub(Inbound,6014863004,1)

[voiceIAend]
exten => 75094,1,NoOp(Voicebot IA Finalizando ${CALLERID(num)} ID: ${Vlead_id})
exten => 75094,n,AGI(voiceIN/Call_Finish.agi,${id})
exten => 75094,n,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))
exten => 75094,n,StopMixMonitor()
exten => 75094,n,Return()

[Encuestas]

exten => 22XXX,1,Noop(transferencia Interna)
exten => 22XXX,n,Dial(SIP/${EXTEN:1},30)
exten => 22XXX,n,Hangup()

exten => 6966XXXX,1,Noop()
exten => 6966XXXX,n,goto(${EXTEN:2})
exten => 6966XXXX,n,Hangup()

;Encuesta 1 DICIEMBRE
exten => 664245,1,NoOp(Encuesta 1 Diciembre 45 ${CALLERID(num)})
exten => 664245,n,AGI(mysoulphone/SP_CallEnd.agi,${CC_id})
exten => 664245,n,StopMixMonitor()
exten => 664245,n(P1),Noop(Encuenta ETB Pregunta 1)
exten => 664245,n,Read(enc_1,AUD_1,1,,3,5)
exten => 664245,n,GotoIf($["${enc_1}"="1"]?P2:)
exten => 664245,n,GotoIf($["${enc_1}"="5"]?P2:P1)
exten => 664245,n(P2),Noop(Encuenta ETB Pregunta 2)
exten => 664245,n,Read(enc_2,AUD_2,1,,3,5)
exten => 664245,n,GotoIf($["${enc_2}"="1"]?fin:)
exten => 664245,n,GotoIf($["${enc_2}"="5"]?fin:P2)
exten => 664245,n(fin),Hangup()

exten => 664243,1,NoOp(Encuesta 1 Diciembre 43 ${CALLERID(num)})
exten => 664243,n,AGI(mysoulphone/SP_CallEnd.agi,${CC_id})
exten => 664243,n,StopMixMonitor()
exten => 664243,n(P1),Noop(Encuenta ETB Pregunta 1)
exten => 664243,n,Read(enc_1,AUD_1,1,,3,5)
exten => 664243,n,GotoIf($["${enc_1}"="1"]?P2:)
exten => 664243,n,GotoIf($["${enc_1}"="5"]?P2:P1)
exten => 664243,n(P2),Noop(Encuenta ETB Pregunta 2)
exten => 664243,n,Read(enc_2,AUD_2,1,,3,5)
exten => 664243,n,GotoIf($["${enc_2}"="1"]?fin:)
exten => 664243,n,GotoIf($["${enc_2}"="5"]?fin:P2)
exten => 664243,n(fin),Hangup()

exten => 664244,1,NoOp(Via Gobernativa 1 Dic ${CALLERID(num)})
exten => 664244,n,AGI(mysoulphone/SP_CallEnd.agi,${CC_id})
exten => 664244,n,StopMixMonitor()
exten => 664244,n,Set(enc_1="Via Gobernativa")
exten => 664244,n,Playback(AUD_10)
exten => 664244,n(P1),Noop(Encuenta ETB Pregunta 1)
exten => 664244,n,Read(enc_2,AUD_1,1,,3,5)
exten => 664244,n,GotoIf($["${enc_2}"="1"]?P2:)
exten => 664244,n,GotoIf($["${enc_2}"="5"]?P2:P1)
exten => 664244,n(P2),Noop(Encuenta ETB Pregunta 2)
exten => 664244,n,Read(enc_3,AUD_2,1,,3,5)
exten => 664244,n,GotoIf($["${enc_3}"="1"]?fin:)
exten => 664244,n,GotoIf($["${enc_3}"="5"]?fin:P2)
exten => 664244,n(fin),HangUp()

;exten => 664243,n,Read(enc_1,1_ETB_satisf,1,,3,5)
;exten => 664243,n,Noop(Encuenta ETB 1)
;exten => 664243,n,Read(enc_2,2_ETB_solucion,1,,3,5)
;exten => 664243,n,Noop(Encuenta ETB 1)
;exten => 664243,n,Read(enc_3,3_ETB_recomenda,1,,3,5)
;exten => 664243,n,Noop(Encuenta ETB 1)
;exten => 664243,n,Read(enc_4,4_ETB_amabilidad,1,,3,5)
;exten => 664243,n,Noop(Encuenta ETB 1)
;exten => 664243,n,Read(enc_5,5_ETB_administra,1,,3,5)
;exten => 664243,n,Hangup()

[DESBORDE_180]

exten => 358953,1,NoOp(PRUEBAS 180 ${CALLERID(num)})
exten => 358953,n,Dial(SIP/VC9180/${EXTEN},60)
exten => 358953,n,Hangup()

exten => 358954,1,NoOp(PRUEBAS 180 2 ${CALLERID(num)})
exten => 358954,n,Dial(SIP/VC9180/${EXTEN},60)
exten => 358954,n,Hangup()

exten => 358955,1,NoOp(PRUEBAS 180 3 ${CALLERID(num)})
exten => 358955,n,Dial(SIP/VC9180/${EXTEN},60)
exten => 358955,n,Hangup()
